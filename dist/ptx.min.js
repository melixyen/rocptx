/*
*   name: rocptx 
*   description: Dynamic public traffic library of Taiwan and Kinmen, Lienchiang 
*   version: 0.0.2 
*   license: MIT 
*   
*   Edit by: Melix Yen
*   E-Mail: melixyen@gmail.com
*   	
*/(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.rocptx=t())})(this,function(){'use strict';function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){return Object.keys(M).find(function(t){return e==M[t]})}function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof e&&(e={paramDirectlyUse:e}),e.cbFn=e.cbFn||function(){},e.top=e.top||5e4,e.format="JSON",e}function o(e){//將 cfg 轉為對應的參數
if(e.paramDirectlyUse)return e.paramDirectlyUse;var t=[];if(e.selectField&&t.push(u.selectFieldFn(e.selectField)),e.filterBy&&t.push(u.filterFn(e.filterBy)),e.orderBy){var i=e.orderDir||!1;t.push(u.orderByFn(e.orderBy,i))}//最後加這個
return t.push(u.topFn(e.top,e.format)),"?"+t.join("&")}function T(e,t,i){i=n(i);var a=o(i);return O(B[e]+t+a,i)}function r(e){if(/^[a-zA-Z]{1}\d{2}/gi.test(e))return e.substr(0,1);if(/^[a-zA-Z]{2}\d{2}/gi.test(e))return e.substr(0,2);for(var t=e.split(""),a="",n=0;n<t.length&&/[a-zA-Z]/.test(t[n]);n++)a+=t[n];return a}function m(e,t,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"LineID",n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"array";return e.forEach(function(e){"array"==n&&(e[i]=[])}),t.forEach(function(t){var o=d.findArrayTarget(e,function(e){return e.LineID==t[a]});"array"==n&&o[i].push(t)}),e}function s(e,t,i){return e.map(function(e){var a={};return t.forEach(function(t){a[t]=e[t]}),"function"==typeof i&&(a=i(a)),a})}function l(e,t,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"StationID",n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"array",o=5<arguments.length?arguments[5]:void 0;return e.forEach(function(e){"array"==n&&(e[i]=[])}),t.forEach(function(t){var T=d.findArrayTarget(e,function(e){return e.StationID==t[a]});"function"==typeof o&&(t=o(t)),"array"==n&&T[i].push(t)}),e}function D(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof e&&(e={paramDirectlyUse:e}),e.cbFn=e.cbFn||function(){},e.top=e.top||Z.queryCount,e.format=Z.format,e}function S(e){//將 cfg 轉為對應的參數
if(e.paramDirectlyUse)return e.paramDirectlyUse;var t=[];if(e.selectField&&t.push(u.selectFieldFn(e.selectField)),e.filterBy&&t.push(u.filterFn(e.filterBy)),e.orderBy){var i=e.orderDir||!1;t.push(u.orderByFn(e.orderBy,i))}//最後加這個
return t.push(u.topFn(e.top,e.format)),"?"+t.join("&")}function I(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=u.filterParam("LineID","==",e),t}function L(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=u.filterParam("StationID","==",e),t}//自動產生 Function
function R(e,t){t=D(t);var i=S(t);return Y(W[e]+i,t)}var d={defaultCrossDayTime:"04:00",timeHour:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],timeMinSec:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],weekStringAry:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],inBrowser:!!("undefined"!=typeof window&&window.document),clone:function(e){return JSON.parse(JSON.stringify(e))},findArrayTarget:function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return e[a]},findAllArrayarget:function(e,t){for(var a=[],n=0;n<e.length;n++)t(e[n])&&a.push(e[n]);return a},weekArray2WeekStr:function(e){return e.map(function(e,t){return e?t:""}).join("")},appendNumber0:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;if(e=e.toString(),e.length<t)for(var a=t-e.length,n=0;n<a;n++)e="0"+e;return e},transTime2Sec:function(e,t){(null==e||""==e)&&(e="0");var i,a=e.split(":");return 1>=a.length?i=parseInt(e,10):2==a.length?i=3600*parseInt(a[0],10)+60*parseInt(a[1],10):3==a.length&&(i=3600*parseInt(a[0],10)+60*parseInt(a[1],10)+parseInt(a[2],10)),t&&i<this.transTime2Sec(this.defaultCrossDayTime)&&(i+=86400),i},transSec2Time:function(e,t){var i=0,a=0,n=0;return""===e?"":(0>parseInt(e,10)?e=86400+e:86400<=parseInt(e)&&!t&&(e-=86400),e=parseInt(e,10),n=e%60,e-=n,e/=60,a=e%60,e-=a,e/=60,i=e,i=10>i?"0"+i:i,a=10>a?"0"+a:a,n=10>n?"0"+n:n,i+":"+a)}};d.statusCode={SUCCESS:"success",FAIL:"fail"},d.CONST_PTX_API_SUCCESS=d.statusCode.SUCCESS,d.CONST_PTX_API_FAIL=d.statusCode.FAIL,d.CONST_PTX_API_MSG_COMM_FAILED="Communication failed, no response. (\u901A\u8A0A\u5931\u6557\uFF0CPTX \u7121\u6CD5\u53D6\u56DE\u8CC7\u6599\u3002)",d.v2url="https://ptx.transportdata.tw/MOTC/v2",d.ptxURL=d.v2url,d.metroURL=d.ptxURL+"/Rail/Metro",d.busURL=d.ptxURL+"/Bus",d.traURL=d.ptxURL+"/Rail/TRA",d.ptxMRTWeekStr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d.defaultCrossDayTimeSec=d.transTime2Sec(d.defaultCrossDayTime),d.pui={printStatus:function(){"object"==("undefined"==typeof TT?"undefined":e(TT))&&TT.ui&&TT.ui.printStatus&&TT.ui.printStatus.apply(TT.ui,arguments)},msg:{show:function(){"object"==("undefined"==typeof TT?"undefined":e(TT))&&TT.ui&&TT.ui.msg&&TT.ui.msg.show&&TT.ui.msg.show.apply(TT.ui,arguments)},alert:function(){"object"==("undefined"==typeof TT?"undefined":e(TT))&&TT.ui&&TT.ui.msg&&TT.ui.msg.alert&&TT.ui.msg.alert.apply(TT.ui,arguments)}},mask:function(){"object"==("undefined"==typeof TT?"undefined":e(TT))&&TT.ui&&TT.ui.mask&&TT.ui.mask.apply(TT.ui,arguments)},unmask:function(){"object"==("undefined"==typeof TT?"undefined":e(TT))&&TT.ui&&TT.ui.unmask&&TT.ui.unmask.apply(TT.ui,arguments)}};var A={};//jsSHA function start
(function(e){function t(D,R,d){var A,y,F,B,M,O,H,_,b,G=0,C=[],P=0,x=!1,N=[],E=[],n=!1;if(d=d||{},A=d.encoding||"UTF8",b=d.numRounds||1,b!==parseInt(b,10)||1>b)throw Error("numRounds must a integer >= 1");if("SHA-1"===D)M=512,O=I,H=L,B=160,_=function(e){return e.slice()};else throw Error("Chosen SHA variant is not supported");F=s(R,A),y=S(D),this.setHMACKey=function(e,t,i){var o;if(!0==x)throw Error("HMAC key already set");if(!0==n)throw Error("Cannot set HMAC key after calling update");if(A=(i||{}).encoding||"UTF8",t=s(t,A)(e),e=t.binLen,t=t.value,o=M>>>3,i=o/4-1,o<e/8){for(t=H(t,e,0,S(D),B);t.length<=i;)t.push(0);t[i]&=4294967040}else if(o>e/8){for(;t.length<=i;)t.push(0);t[i]&=4294967040}for(e=0;e<=i;e+=1)N[e]=909522486^t[e],E[e]=1549556828^t[e];y=O(N,y),G=M,x=!0},this.update=function(t){var i,a,o,T=0,r=M>>>5;for(i=F(t,C,P),t=i.binLen,a=i.value,i=t>>>5,o=0;o<i;o+=r)T+M<=t&&(y=O(a.slice(o,o+r),y),T+=M);G+=T,C=a.slice(T>>>5),P=t%M,n=!0},this.getHash=function(e,t){var n,m,s,I;if(!0==x)throw Error("Cannot call getHash after setting HMAC key");switch(s=a(t),e){case"HEX":n=function(e){return i(e,B,s)};break;case"B64":n=function(e){return o(e,B,s)};break;case"BYTES":n=function(e){return T(e,B)};break;case"ARRAYBUFFER":try{m=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return r(e,B)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER");}for(I=H(C.slice(),P,G,_(y),B),m=1;m<b;m+=1)I=H(I,B,0,S(D),B);return n(I)},this.getHMAC=function(e,t){var m,s,l,I;if(!1==x)throw Error("Cannot call getHMAC without first setting HMAC key");switch(l=a(t),e){case"HEX":m=function(e){return i(e,B,l)};break;case"B64":m=function(e){return o(e,B,l)};break;case"BYTES":m=function(e){return T(e,B)};break;case"ARRAYBUFFER":try{m=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}m=function(e){return r(e,B)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER");}return s=H(C.slice(),P,G,_(y),B),I=O(E,S(D)),I=H(s,B,M,I,B),m(I)}}function i(e,t,i){var n="";t/=8;var o,T;for(o=0;o<t;o+=1)T=e[o>>>2]>>>8*(3+-1*(o%4)),n+="0123456789abcdef".charAt(15&T>>>4)+"0123456789abcdef".charAt(15&T);return i.outputUpper?n.toUpperCase():n}function o(e,t,i){var n,o,T,r="",s=t/8;for(n=0;n<s;n+=3)for(o=n+1<s?e[n+1>>>2]:0,T=n+2<s?e[n+2>>>2]:0,T=(255&e[n>>>2]>>>8*(3+-1*(n%4)))<<16|(255&o>>>8*(3+-1*((n+1)%4)))<<8|255&T>>>8*(3+-1*((n+2)%4)),o=0;4>o;o+=1)r+=8*n+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&T>>>6*(3-o)):i.b64Pad;return r}function T(e,t){var n,o,i=String.fromCharCode,T="";for(n=0;n<t/8;n+=1)o=255&e[n>>>2]>>>8*(3+-1*(n%4)),T+=i(o);return T}function r(e,t){var i,n,o=t/8,T=new ArrayBuffer(o);for(n=new Uint8Array(T),i=0;i<o;i+=1)n[i]=255&e[i>>>2]>>>8*(3+-1*(i%4));return T}function a(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),"boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function s(e,i){var t;switch(i){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE");}switch(e){case"HEX":t=function t(i,n,o){var t,T,r,m,s,D=i.length;if(0!=D%2)throw Error("String of HEX type must be in byte increments");for(n=n||[0],o=o||0,s=o>>>3,t=0;t<D;t+=2){if(T=parseInt(i.substr(t,2),16),isNaN(T))throw Error("String of HEX type contains invalid characters");for(m=(t>>>1)+s,r=m>>>2;n.length<=r;)n.push(0);n[r]|=T<<8*(3+-1*(m%4))}return{value:n,binLen:4*D+o}};break;case"TEXT":t=function(o,T,r){var m,s,D,S,I,L,R,A,y=0;if(T=T||[0],r=r||0,I=r>>>3,"UTF8"===i)for(A=3,D=0;D<o.length;D+=1)for(m=o.charCodeAt(D),s=[],128>m?s.push(m):2048>m?(s.push(192|m>>>6),s.push(128|63&m)):55296>m||57344<=m?s.push(224|m>>>12,128|63&m>>>6,128|63&m):(D+=1,m=65536+((1023&m)<<10|1023&o.charCodeAt(D)),s.push(240|m>>>18,128|63&m>>>12,128|63&m>>>6,128|63&m)),S=0;S<s.length;S+=1){for(R=y+I,L=R>>>2;T.length<=L;)T.push(0);T[L]|=s[S]<<8*(A+-1*(R%4)),y+=1}else if("UTF16BE"===i||"UTF16LE"===i)for(A=2,D=0;D<o.length;D+=1){for(m=o.charCodeAt(D),"UTF16LE"===i&&(S=255&m,m=S<<8|m>>>8),R=y+I,L=R>>>2;T.length<=L;)T.push(0);T[L]|=m<<8*(A+-1*(R%4)),y+=2}return{value:T,binLen:8*y+r}};break;case"B64":t=function t(i,o,T){var r,m,s,D,S,I,L,t=0;if(-1===i.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(m=i.indexOf("="),i=i.replace(/\=/g,""),-1!==m&&m<i.length)throw Error("Invalid '=' found in base-64 string");for(o=o||[0],T=T||0,I=T>>>3,m=0;m<i.length;m+=4){for(S=i.substr(m,4),s=D=0;s<S.length;s+=1)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(S[s]),D|=r<<18-6*s;for(s=0;s<S.length-1;s+=1){for(L=t+I,r=L>>>2;o.length<=r;)o.push(0);o[r]|=(255&D>>>16-8*s)<<8*(3+-1*(L%4)),t+=1}}return{value:o,binLen:8*t+T}};break;case"BYTES":t=function(t,i,n){var o,T,r,s,D;for(i=i||[0],n=n||0,r=n>>>3,T=0;T<t.length;T+=1)o=t.charCodeAt(T),D=T+r,s=D>>>2,i.length<=s&&i.push(0),i[s]|=o<<8*(3+-1*(D%4));return{value:i,binLen:8*t.length+n}};break;case"ARRAYBUFFER":try{t=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}t=function(t,i,n){var o,T,r,s,D;for(i=i||[0],n=n||0,T=n>>>3,D=new Uint8Array(t),o=0;o<t.byteLength;o+=1)s=o+T,r=s>>>2,i.length<=r&&i.push(0),i[r]|=D[o]<<8*(3+-1*(s%4));return{value:i,binLen:8*t.byteLength+n}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER");}return t}function l(e,t){return e<<t|e>>>32-t}function n(e,t){var i=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(i>>>16))<<16|65535&i}function D(e,t,i,n,o){var a=(65535&e)+(65535&t)+(65535&i)+(65535&n)+(65535&o);return(65535&(e>>>16)+(t>>>16)+(i>>>16)+(n>>>16)+(o>>>16)+(a>>>16))<<16|65535&a}function S(e){var t=[];if("SHA-1"===e)t=[1732584193,4023233417,2562383102,271733878,3285377520];else throw Error("No SHA variants supported");return t}function I(t,i){var o,T,r,s,S,I,L,R=[];for(o=i[0],T=i[1],r=i[2],s=i[3],S=i[4],L=0;80>L;L+=1)R[L]=16>L?t[L]:l(R[L-3]^R[L-8]^R[L-14]^R[L-16],1),I=20>L?D(l(o,5),T&r^~T&s,S,1518500249,R[L]):40>L?D(l(o,5),T^r^s,S,1859775393,R[L]):60>L?D(l(o,5),T&r^T&s^r&s,S,2400959708,R[L]):D(l(o,5),T^r^s,S,3395469782,R[L]),S=s,s=r,r=l(T,30),T=o,o=I;return i[0]=n(o,i[0]),i[1]=n(T,i[1]),i[2]=n(r,i[2]),i[3]=n(s,i[3]),i[4]=n(S,i[4]),i}function L(e,t,i,n){var o;for(o=(t+65>>>9<<4)+15;e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=i,e[o]=4294967295&t,e[o-1]=0|t/4294967296,t=e.length,o=0;o<t;o+=16)n=I(e.slice(o,o+16),n);return n}"function"==typeof define&&define.amd?define(function(){return t}):"undefined"==typeof exports?e.jsSHA=t:("undefined"!=typeof module&&module.exports&&(module.exports=t),exports=t)})(A);//jsSHA function end
var y=A.jsSHA,c=function(){return u.trtc},u={statusCode:d.statusCode,timeout:3e4,tempTimeTable:{},throwError:function(e){throw e},filterParam:function(t,a,n,o){o=o||"or",o=o.toLowerCase();var T={"=":"eq","==":"eq","===":"eq","!=":"ne","!==":"ne","!":"not",">":"gt",">=":"ge","<":"lt","<=":"le"}[a]||a;if("object"==e(t)&&"object"==e(n)&&t.length!=n.length)return u.throwError("Not equal length of filterParam filed and value;"),!1;"object"!=e(t)&&(t=[t]),"object"!=e(n)&&(n=[n]);for(var r,m,s=t.length>n.length?t.length:n.length,l=[],D=0;D<s;D++)r=t[D]||t[0],m=n[D]||n[0],"string"==typeof m&&(m="'"+m+"'"),l.push(r+" "+T+" "+m);return l.join(" "+o+" ")},filterFn:function(e){return encodeURI("$filter="+e)},orderByFn:function(e,t){return t=t&&"string"==typeof t?" "+t.toLowerCase():"",encodeURI("$orderby="+arguments[0]+t)},topFn:function(e,t){return e=e||3e3,t=t||"JSON","$top="+e+"&format="+t},selectFieldFn:function(t){return"object"==e(t)&&t.length&&(t=t.join(",")),encodeURI("$select="+t)},GetAuthorizationHeader:function(){var e=u.AppID||"FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF",t=u.AppKey||"FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF",i=new Date().toGMTString(),a=new y("SHA-1","TEXT");a.setHMACKey(t,"TEXT"),a.update("x-date: "+i);var n=a.getHMAC("B64");return{Authorization:"hmac username=\""+e+"\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\""+n+"\"","X-Date":i}},getTakeMRTTimeTable:function(e,t,i){function a(e){if(0==e.length)i(n,u.tempTimeTable);else{var o=e.shift();if("trtc"==o.company){var T=c().getLineID(o.line),r=c().getStationID(o.takeRange[0],o.line),m=c().getStationID(o.takeRange[1],o.line);c().getStationTime(T,[r,m],parseInt(t),function(t){var i={LineID:T,StationID:r,targetID:m};t==d.CONST_PTX_API_FAIL?(i.status=d.CONST_PTX_API_FAIL,i.message=d.CONST_PTX_API_MSG_COMM_FAILED,n.push(i),a(e)):(i.status=d.CONST_PTX_API_SUCCESS,n.push(i),a(e))})}}}var n=[];a(e)},getURL:function(e,t){function i(e){var i={xhr:e,data:e.target.response};4==e.target.readyState&&200==e.target.status?(i.status=d.CONST_PTX_API_SUCCESS,t(JSON.parse(e.target.response),i)):(i.status=d.CONST_PTX_API_FAIL,t(e.target.response,i))}var a=new XMLHttpRequest;a.addEventListener("load",i),a.addEventListener("error",i),a.addEventListener("abort",i),a.addEventListener("timeout",i),a.open("GET",e),a.timeout=u.timeout;var n=this.GetAuthorizationHeader();for(var o in n)a.setRequestHeader(o,n[o]);a.send()},getPromiseURL:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,a){function n(n){var o={xhr:n,url:e,config:t,resolve:i,reject:a,response:n.target.response};4==n.target.readyState&&200==n.target.status?(o.status=d.CONST_PTX_API_SUCCESS,o.data=JSON.parse(n.target.response),"function"==typeof t.processJSON&&(o.data=t.processJSON(o.data)),i(o)):(o.status=d.CONST_PTX_API_FAIL,a(o))}var o=new XMLHttpRequest;o.addEventListener("load",n),o.addEventListener("error",n),o.addEventListener("abort",n),o.addEventListener("timeout",n);var T=t.method||"GET";o.open(T,e),o.timeout=t.timeout||u.timeout;var r=t.head||u.GetAuthorizationHeader();for(var m in r)o.setRequestHeader(m,r[m]);o.send()})},getStationLiveInfo:function(e,t){e=e?e.replace("tra_",""):"1008",t=t||function(e){console.info(e)};var i=traURL+"/LiveBoard/Station/"+e+"?$top=30&$format=JSON";this.getURL(i,t)},getStationTodayTime:function(e,t){e=e?e.replace("tra_",""):"1008",t=t||function(e){console.info(e)};var i=traURL+"/DailyTimetable/Station/"+e+"/"+TT.goingData.today+"?$top=3000&$format=JSON";this.getURL(i,t)},sortByTTSortTime:function(e,t){var i=parseInt(e.tt_sortTime,10),a=parseInt(t.tt_sortTime,10);return i==a?0:i<a?-1:i>a?1:void 0}},g={bus:{city:[{name:"\u81FA\u5317\u5E02",City:"Taipei",CityCode:"TPE"},{name:"\u65B0\u5317\u5E02",City:"NewTaipei",CityCode:"NWT"},{name:"\u6843\u5712\u5E02",City:"Taoyuan",CityCode:"TAO"},{name:"\u81FA\u4E2D\u5E02",City:"Taichung",CityCode:"TXG"},{name:"\u81FA\u5357\u5E02",City:"Tainan",CityCode:"TNN"},{name:"\u9AD8\u96C4\u5E02",City:"Kaohsiung",CityCode:"KHH"},{name:"\u57FA\u9686\u5E02",City:"Keelung",CityCode:"KEE"},{name:"\u65B0\u7AF9\u5E02",City:"Hsinchu",CityCode:"HSZ"},{name:"\u65B0\u7AF9\u7E23",City:"HsinchuCounty",CityCode:"HSQ"},{name:"\u82D7\u6817\u7E23",City:"MiaoliCounty",CityCode:"MIA"},{name:"\u5F70\u5316\u7E23",City:"ChanghuaCounty",CityCode:"CHA"},{name:"\u5357\u6295\u7E23",City:"NantouCounty",CityCode:"NAN"},{name:"\u96F2\u6797\u7E23",City:"YunlinCounty",CityCode:"YUN"},{name:"\u5609\u7FA9\u7E23",City:"ChiayiCounty",CityCode:"CYQ"},{name:"\u5609\u7FA9\u5E02",City:"Chiayi",CityCode:"CYI"},{name:"\u5C4F\u6771\u7E23",City:"PingtungCounty",CityCode:"PIF"},{name:"\u5B9C\u862D\u7E23",City:"YilanCounty",CityCode:"ILA"},{name:"\u82B1\u84EE\u7E23",City:"HualienCounty",CityCode:"HUA"},{name:"\u81FA\u6771\u7E23",City:"TaitungCounty",CityCode:"TTT"},{name:"\u91D1\u9580\u7E23",City:"KinmenCounty",CityCode:"KIN"},{name:"\u6F8E\u6E56\u7E23",City:"PenghuCounty",CityCode:"PEN"},{name:"\u9023\u6C5F\u7E23",City:"LienchiangCounty",CityCode:"LIE"}]},trtc:{station_ary:[//Bannan Line
{id:"trtc_031",StationID:["BL23","BR24"]},{id:"trtc_097",StationID:["BL22"]},{id:"trtc_096",StationID:["BL21"]},{id:"trtc_095",StationID:["BL20"]},{id:"trtc_094",StationID:["BL19"]},{id:"trtc_093",StationID:["BL18"]},{id:"trtc_092",StationID:["BL17"]},{id:"trtc_091",StationID:["BL16"]},{id:"trtc_010",StationID:["BL15","BR10"]},{id:"trtc_089",StationID:["BL14","O07"]},{id:"trtc_088",StationID:["BL13"]},{id:"trtc_086",StationID:["BL11","G12"]},{id:"trtc_085",StationID:["BL10"]},{id:"trtc_084",StationID:["BL09"]},{id:"trtc_083",StationID:["BL08"]},{id:"trtc_082",StationID:["BL07"]},{id:"trtc_081",StationID:["BL06"]},{id:"trtc_080",StationID:["BL05"]},{id:"trtc_079",StationID:["BL04"]},{id:"trtc_078",StationID:["BL03"]},{id:"trtc_077",StationID:["BL02"]},{id:"trtc_076",StationID:["BL01"]},//TamsuiXinyi Line
{id:"trtc_071",StationID:["R28"]},{id:"trtc_070",StationID:["R27"]},{id:"trtc_069",StationID:["R26"]},{id:"trtc_068",StationID:["R25"]},{id:"trtc_067",StationID:["R24"]},{id:"trtc_066",StationID:["R23"]},{id:"trtc_064",StationID:["R22"]},{id:"trtc_063",StationID:["R21"]},{id:"trtc_062",StationID:["R20"]},{id:"trtc_061",StationID:["R19"]},{id:"trtc_060",StationID:["R18"]},{id:"trtc_059",StationID:["R17"]},{id:"trtc_058",StationID:["R16"]},{id:"trtc_057",StationID:["R15"]},{id:"trtc_056",StationID:["R14"]},{id:"trtc_055",StationID:["R13","O11"]},{id:"trtc_054",StationID:["R12"]},{id:"trtc_053",StationID:["R11","G14"]},{id:"trtc_051",StationID:["R10","BL12"]},{id:"trtc_050",StationID:["R09"]},{id:"trtc_134",StationID:["R07","O06"]},{id:"trtc_103",StationID:["R06"]},{id:"trtc_011",StationID:["R05","BR09"]},{id:"trtc_101",StationID:["R04"]},{id:"trtc_100",StationID:["R03"]},{id:"trtc_099",StationID:["R02"]},//ZhongHeXinLu Line
{id:"trtc_048",StationID:["O01"]},{id:"trtc_047",StationID:["O02"]},{id:"trtc_046",StationID:["O03"]},{id:"trtc_045",StationID:["O04"]},{id:"trtc_131",StationID:["O09"]},{id:"trtc_130",StationID:["O10"]},{id:"trtc_128",StationID:["O12"]},{id:"trtc_127",StationID:["O13"]},{id:"trtc_126",StationID:["O14"]},{id:"trtc_125",StationID:["O15"]},{id:"trtc_124",StationID:["O16"]},{id:"trtc_123",StationID:["O17"]},{id:"trtc_122",StationID:["O18"]},{id:"trtc_121",StationID:["O19"]},{id:"trtc_180",StationID:["O20"]},{id:"trtc_179",StationID:["O21"]},{id:"trtc_178",StationID:["O50"]},{id:"trtc_177",StationID:["O51"]},{id:"trtc_176",StationID:["O52"]},{id:"trtc_175",StationID:["O53"]},{id:"trtc_174",StationID:["O54"]},//SongShanXinDian Line
{id:"trtc_111",StationID:["G19"]},{id:"trtc_110",StationID:["G18"]},{id:"trtc_109",StationID:["G17"]},{id:"trtc_009",StationID:["G16","BR11"]},{id:"trtc_132",StationID:["G15","O08"]},{id:"trtc_105",StationID:["G13"]},{id:"trtc_043",StationID:["G11"]},{id:"trtc_042",StationID:["G10","R08"]},{id:"trtc_041",StationID:["G09","O05"]},{id:"trtc_040",StationID:["G08"]},{id:"trtc_039",StationID:["G07"]},{id:"trtc_038",StationID:["G06"]},{id:"trtc_037",StationID:["G05"]},{id:"trtc_036",StationID:["G04"]},{id:"trtc_035",StationID:["G03"]},{id:"trtc_034",StationID:["G02"]},{id:"trtc_033",StationID:["G01"]}],line:[{id:"trtc_1",LineID:"BR",route:[{dir:0,Direction:0,work:[{RouteID:"BR-1",from:"BR01",to:"BR24"}]},{dir:1,Direction:1,work:[{RouteID:"BR-1",from:"BR24",to:"BR01"}]}]},{id:"trtc_2",LineID:"R",route:[{dir:0,Direction:0,work:[{RouteID:"R-1",from:"R02",to:"R28"},{RouteID:"R-2",from:"R05",to:"R22"}]},{dir:1,Direction:1,work:[{RouteID:"R-1",from:"R28",to:"R02"},{RouteID:"R-2",from:"R22",to:"R05"}]}]},{id:"trtc_3",LineID:"G",route:[{dir:0,Direction:0,work:[{RouteID:"G-1",from:"G01",to:"G19"},{RouteID:"G-2",from:"G08",to:"G19"}]},{dir:1,Direction:1,work:[{RouteID:"G-1",from:"G19",to:"G01"},{RouteID:"G-2",from:"G19",to:"G08"}]}]},{id:"trtc_4",LineID:"O",route:[{dir:0,Direction:0,work:[{RouteID:"O-1",from:"O01",to:"O21"},{RouteID:"O-2",from:"O01",to:"O54"}]},{dir:1,Direction:1,work:[{RouteID:"O-1",from:"O21",to:"O01"},{RouteID:"O-2",from:"O54",to:"O01"}]}]},{id:"trtc_5",LineID:"BL",route:[{dir:0,Direction:0,work:[{RouteID:"BL-1",from:"BL01",to:"BL23"},{RouteID:"BL-2",from:"BL05",to:"BL23"}]},{dir:1,Direction:1,work:[{RouteID:"BL-1",from:"BL23",to:"BL01"},{RouteID:"BL-2",from:"BL23",to:"BL05"}]}]}]}},F=d.busURL,p=d.metroURL,B={Network:p+"/Network",//取得捷運路網資料
Line:p+"/Line/",//取得捷運路線基本資料
Station:p+"/Station/",//取得捷運車站基本資料
StationOfLine:p+"/StationOfLine/",//取得捷運路線車站基本資料
LineTransfer:p+"/LineTransfer/",//取得捷運路線站間轉乘基本資料
StationFacility:p+"/StationFacility/",//取得捷運車站設施資料
StationExit:p+"/StationExit/",//取得捷運車站出入口基本資料
Route:p+"/Route/",//取得捷運營運路線基本資料
StationOfRoute:p+"/StationOfRoute/",//取得捷運營運路線車站基本資料
FirstLastTimetable:p+"/FirstLastTimetable/",//取得捷運首末班車時刻表資料
Frequency:p+"/Frequency/",//取得捷運路線發車班距頻率資料
S2STravelTime:p+"/S2STravelTime/",//取得捷運列車站間運行時間資料
ODFare:p+"/ODFare/",//取得捷運起迄站間票價資料
LiveBoard:p+"/LiveBoard/",//取得捷運起迄站間票價資料
StationTimeTable:p+"/StationTimeTable/",//取得捷運站別時刻表資料
Shape:p+"/Shape/"//取得指定營運業者之軌道路網實體路線圖資資料
},M={trtc:"TRTC",tymetro:"TYMC",klrt:"KLRT",krtc:"KRTC"},O=u.getPromiseURL,h={getCompanyTag:function(e){return M[e]||e},getStationOnWhatLineID:r,urls:B,companyTag:M//自動產生 Function
},f=Object.keys(B),w=[];f.forEach(function(e){/^Network$/.test(e)||(h["_"+e]=function(t,i){return T(e,t,i)},w.push("_"+e))}),h.ptxAutoMetroFunctionKey=w;h.baseMethod=function n(o){var S=Math.ceil;function T(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=u.filterParam("LineID","==",e),t}function D(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=u.filterParam("StationID","==",e),t}var I,L=this;t(this,n);var R=this,A=a(o);this.companyTag=o,w.forEach(function(e){L[e]=function(t){return h[e](o,t)}});var y=(I={getRoute:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._Route(t)},getLineFrequency:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._Frequency(t)},getLineTransfer:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=u.filterParam("FromLineID","==",e),R._LineTransfer(t)}},i(I,"getLineFrequency",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._Frequency(t)}),i(I,"getFirstLastTimetable",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._FirstLastTimetable(t)}),i(I,"getS2STravelTime",function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i=T(t,i),i.processJSON=function(t){var i,a,n;if("object"!=e(t))return t;for(var o=0;o<t.length;o++)i=t[o].TravelTimes,t[o].TravelInterval=i.map(function(e,t,i){return n=i[t+1]?parseInt(i[t+1].StopTime):0,a=parseInt(e.RunTime)+S(parseInt(e.StopTime)/2)+S(n/2),a});return t},R._S2STravelTime(i)}),i(I,"getStationOfLine",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._StationOfLine(t)}),i(I,"getStationOfRoute",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=T(e,t),R._StationOfRoute(t)}),i(I,"getFromToFare",function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return i.filterBy=i.filterBy||"",i.filterBy+=TT.ptx.filterParam(["OriginStationID","DestinationStationID"],"==",[e,t],"and"),R._ODFare(i)}),i(I,"getFromToTravelTime",function(e,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=r(e);return R.getS2STravelTime(o,n).then(function(t){var i=t.data.find(function(n){for(var o=!1,T=!1,r=n.TravelTimes,t=0;t<r.length;t++)r[t].FromStationID==e||r[t].ToStationID==e?o=!0:(r[t].FromStationID==a||r[t].ToStationID==a)&&(T=!0);return o&&T});i&&i.TravelTimes&&(i=i.TravelTimes);var n=!1,o="any";// any , from / to , finish
if(!i)return{status:d.CONST_PTX_API_FAIL,error:"No match any route."};var T=i.filter(function(t){switch(o){case"any":return(t.FromStationID==e||t.FromStationID==a)&&(o=t.FromStationID==e?"to":"from",!0);break;case"from":n=!0;case"to":return(t.ToStationID==e||t.ToStationID==a)&&(o="finish"),!0;break;case"finish":return!1;}});T=n?T.map(function(e,t,i){return{FromStationID:e.ToStationID,FromStationName:e.ToStationName,ToStationID:e.FromStationID,ToStationName:e.FromStationName,Sequence:i.length-t,RunTime:e.RunTime,StopTime:t==i.length-1?0:e.StopTime}}).reverse():T.map(function(e,t){return e.Sequence=t+1,e.StopTime=0==t?0:e.StopTime,e});var r,m=0,s=T.map(function(e,t,i){return m+=parseInt(e.RunTime)+parseInt(e.StopTime),r=i[t+1]?parseInt(i[t+1].StopTime):0,parseInt(e.RunTime)+S(parseInt(e.StopTime)/2)+S(r/2)});return{status:d.CONST_PTX_API_SUCCESS,TravelTimes:T,TravelInterval:s,TotalTime:m,FromStationID:e,ToStationID:a}})}),i(I,"getStation",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._Station(t)}),i(I,"getStationTimeTable",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._StationTimeTable(t)}),i(I,"getStationFacility",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._StationFacility(t)}),i(I,"getStationFirstLastTimetable",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._FirstLastTimetable(t)}),i(I,"getStationExit",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._StationExit(t)}),i(I,"getStationFare",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=TT.ptx.filterParam("OriginStationID","==",e),R._ODFare(t)}),i(I,"getStationLiveBoard",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=D(e,t),R._LiveBoard(t)}),I);for(var c in y)this[c]=y[c];// ==== 整合抓資料 Function 以及抓完後的固定資料存取 Function ====
var g={config:{Line_BackTag:["LineID","LineName","LineColor","IsBranch"],Line_StationOfRoute_BackTag:["RouteID","Direction","LineID","Stations"],Line_LineTransfer_BackTag:["FromLineID","FromStationID","ToLineID","ToStationID","IsOnSiteTransfer","TransferTime"],Line_S2STravelTime_BackTag:["LineID","RouteID","TravelTimes"],Line_Frequency_BackTag:["LineID","RouteID","ServiceDays","OperationTime","Headways"],Line_callback:function(e){//通用預處理
return e},Line_callback_final:function(e){//私用預處理
return e},Station_BackTag:["StationID","StationName","StationPosition"],Station_FirstLastTimetable_BackTag:["StationID","LineID","DestinationStaionID","FirstTrainTime","LastTrainTime"],Station_Fare_BackTag:["OriginStationID","DestinationStationID","Fares"]},calcStationDayTimeBySimple:function(e){//如果這路線有分主幹線，要區分主幹線
//過濾要找的星期
function t(e){var i=[],a=[];return e.forEach(function(e){e.Timetables.forEach(function(n){if(-1==a.indexOf(n)){a.push(n);var t={RouteID:e.RouteID,To:e.To,Time:n,tt_sortTime:d.transTime2Sec(n,!0)};e.TrainType&&(t.TrainType=e.TrainType),i.push(t)}})}),i.sort(u.sortByTTSortTime),a=i.map(function(e){return e.Time}),{Route:e,Full:i,Simple:a,isEmpty:0==e.length}}var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;//運用 TimeSimple Format 計算一個車站每週每日往兩方向的所有班次資訊 , w for weekdays
i=i.toString();var a=new RegExp(i);if(!e)return{error:"No time data"};var n=g.getDataXLineMainSub(e.LineID),o=!!(0<n.sub.length),T=!1,r=!1,m=e.Direction.map(function(e){var i=e.filter(function(e){return o&&-1==n.main.indexOf(e.RouteID)&&(r=!0),-1!=n.main.indexOf(e.RouteID)&&a.test(e.weekStr)});return t(i)});m[0].isEmpty&&m[1].isEmpty&&(m=!1),o&&r&&(T=e.Direction.map(function(e){var i=e.filter(function(e){return-1!=n.sub.indexOf(e.RouteID)&&a.test(e.weekStr)});return t(i)}));//整理目標方向車站
var s=[[],[]],l=[[],[]];return m&&(m[0].Route.forEach(function(e){-1==s[0].indexOf(e.To)&&s[0].push(e.To)}),m[1].Route.forEach(function(e){-1==s[1].indexOf(e.To)&&s[1].push(e.To)})),T&&(T[0].Route.forEach(function(e){-1==l[0].indexOf(e.To)&&l[0].push(e.To)}),T[1].Route.forEach(function(e){-1==l[1].indexOf(e.To)&&l[1].push(e.To)})),{StationID:e.StationID,LineID:e.LineID,main:m,sub:T,mainTo:s,subTo:l,week:i}},calcStationTimeByHeadWays:function(e,t,i,a){"string"==typeof e&&(e=g.getDataXLineObj(e));var n=g.getDataXStationData(t),o=e.Route.find(function(e){return e.RouteID==i&&e.Direction==a}).Stations;o=o[o.length-1];var T=n.FirstLast.find(function(e){return e.To==o}),r=T.Time[0],m=T.Time[1];return e.Frequency.map(function(e){for(var t=e.Headways,a=[],n="",o=0,T=0,s=!1,l=0,D=0,I=0;I<t.length;){s=t[I],o=0==I?d.transTime2Sec(r,!0)/60:d.transTime2Sec(s.Time[0],!0)/60,T=d.transTime2Sec(s.Time[1],!0)/60,l=s.AveMins+(T-o)%s.AveMins,D=S((T-o)/l);for(var L=0;L<D;L++)n=d.transSec2Time(60*(o+L*l)),a.push(n);I++}return-1==a.indexOf(m)&&a.push(m),{weekStr:d.weekArray2WeekStr(e.ServiceDays.week),time:a}})},calcLineTimeByFirstStation:function(e,t,a,n,o){"string"==typeof e&&(e=g.getDataXLineObj(e));for(var T,r=e.Route.find(function(e){return e.RouteID==n&&e.Direction==o}),m=r.Stations,s=r.Stations[r.Stations.length-1],l=r.TravelTime.RunTime,D=r.TravelTime.StopTime,S=r.Stations.indexOf(t),I=[],L=d.transTime2Sec(a),R=S;R<m.length;R++)T=L+0,I.push(T),R<m.length-1&&(L=T+l[R],D[R+1]&&(L+=D[R+1]));return I.map(function(e){return d.transSec2Time(e)})},getDataXLineObj:function(e){return u.datax[A].line.find(function(t){return t.LineID==e})},getDataXLineMainSub:function(t){t="object"==("undefined"==typeof line?"undefined":e(line))?t:g.getDataXLineObj(t);var i=[],a=[],n=t.Route.map(function(e){return e.RouteID}).filter(function(e,t,i){return i.indexOf(e)==t});return t.main?(i=t.main,a=n.filter(function(e){return-1==i.indexOf(e)})):i=n,{main:i,sub:a}},getDataXRouteDirectionInfo:function(e,t,i){var a=g.getDataXLineObj(e);return a.Route.find(function(e){return e.RouteID==t&&e.Direction==i})},getDataXRouteMainTerminal:function(e){var t=g.getDataXLineObj(e),i=t.Route[0].Stations;return[i[0],i[i.length-1]]},getDataXStationData:function(e){return u.datax[A].station.find(function(t){return t.StationID==e})},getDataXStationName:function(e,t){var i=g.getDataXStationData(e);return t?i.ename:i.name},getStationByTimeSimpleArray:function(e,t){return t.find(function(t){return t.StationID==e})},Line:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8DEF\u7DB2\u4E2D");var t=g.config.Line_BackTag,i=R._Line({selectField:t}).then(function(e){return s(e.data,t)}).then(function(t){e("\u53D6\u5F97\u5404\u7DDA\u8DEF\u7531\u4E2D");var i=g.config.Line_StationOfRoute_BackTag;return R._StationOfRoute({selectField:i}).then(function(e){//整理
return s(e.data,i,function(e){return e.Stations=e.Stations.map(function(e){return e.StationID}),e})}).then(function(e){//合併
return m(t,e,"Route")}).catch(function(){return t})}).then(function(t){e("\u53D6\u5F97\u8F49\u4E58\u8CC7\u8A0A\u4E2D");var i=g.config.Line_LineTransfer_BackTag;return R._LineTransfer({selectField:i}).then(function(e){//整理
return s(e.data,i)}).then(function(e){//合併
return m(t,e,"Transfer","FromLineID")}).catch(function(){return t})}).then(function(t){e("\u53D6\u5F97\u7AD9\u9593\u8DDD\u6642\u9593\u4E2D");var i=g.config.Line_S2STravelTime_BackTag;return R._S2STravelTime({selectField:i}).then(function(e){//整理
return s(e.data,i,function(e){return e.TravelTimes=e.TravelTimes.map(function(e){var t={FromTo:[e.FromStationID,e.ToStationID],RunTime:e.RunTime};return"undefined"!=typeof e.StopTime&&(t.StopTime=e.StopTime),t}),e})}).then(function(e){//合併
return m(t,e,"TravelTime")}).catch(function(){return t})}).then(function(t){e("\u53D6\u5F97\u73ED\u8DDD\u4E2D");var i=g.config.Line_Frequency_BackTag;return R._Frequency({selectField:i}).then(function(e){//整理
return s(e.data,i,function(e){e.OperationTime=[e.OperationTime.StartTime,e.OperationTime.EndTime],e.Headways=e.Headways.map(function(e){return e.Time=[e.StartTime,e.EndTime],delete e.StartTime,delete e.EndTime,e.AveMins=S((parseInt(e.MinHeadwayMins)+parseInt(e.MaxHeadwayMins))/2),e});var t=e.ServiceDays;return e.ServiceDays={ServiceTag:t.ServiceTag,NationalHolidays:t.NationalHolidays,week:[t.Sunday,t.Monday,t.Tuesday,t.Wednesday,t.Thursday,t.Friday,t.Saturday]},e})}).then(function(e){//合併
return m(t,e,"Frequency")}).catch(function(){return t})}).then(function(t){return e("\u6574\u7406\u8F38\u51FA\u8CC7\u6599\u683C\u5F0F"),g.config.Line_callback_final(g.config.Line_callback(t))});return i},Station:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8ECA\u7AD9\u4E2D");var t=g.config.Station_BackTag,i=R._Station({selectField:t}).then(function(e){return s(e.data,t)}).then(function(e){return e.forEach(function(e){e.StationPosition&&(e.lat=e.StationPosition.PositionLat,e.lon=e.StationPosition.PositionLat,delete e.StationPosition),e.name=e.StationName.Zh_tw,e.StationName.En&&(e.ename=e.StationName.En),delete e.StationName}),e}).then(function(t){e("\u53D6\u5F97\u9996\u672B\u73ED\u8ECA");var i=g.config.Station_FirstLastTimetable_BackTag;return R._FirstLastTimetable({selectField:i}).then(function(e){//整理
return s(e.data,i)}).then(function(e){//合併
var i=l(t,e,"FirstLast","StationID","array",function(e){var t={To:e.DestinationStaionID,Time:[e.FirstTrainTime,e.LastTrainTime]};return"undefined"!=typeof e.TrainType&&(t.TrainType=e.TrainType),t});return i}).catch(function(){return t})});return i},Fare:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8ECA\u7AD9\u4E2D");var t=g.config.Station_Fare_BackTag;return R._ODFare({selectField:t}).then(function(e){//整理
return s(e.data,t)}).then(function(e){//合併
var t={};return e.forEach(function(e){t[e.OriginStationID]||(t[e.OriginStationID]={});var i=e.Fares.find(function(e){return 1==e.TicketType&&1==e.FareClass});i&&(t[e.OriginStationID][e.DestinationStationID]=i.Price)}),t}).catch(function(e){return e})},TimeTable:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8ECA\u7AD9\u4E2D");var t=["StationID"],i=[];return R._Station({selectField:t}).then(function(e){return s(e.data,t)}).then(function(t){//依序將所有車站做成 Promise 抓資料，間隔 
function a(t){return function(){return new Promise(function(e){setTimeout(e,100)}).then(function(){return e("\u6B63\u5728\u8B80\u53D6 "+t+" \u7AD9\u7684\u6642\u523B\u8868"),R.getStationTimeTable(t).then(function(e){var t=e.data;return t&&0<t.length&&i.push(t),t})})}}var n=t.map(function(e){return a(e.StationID)});return n.reduce(function(e,t){return e.then(t)},Promise.resolve()).then(function(){return i})}).then(function(e){return e}).catch(function(e){return e})},TimeSimple:function(e){return g.TimeTable(e).then(function(t){return e("\u7C21\u5316\u8F38\u51FA\u683C\u5F0F"),t.forEach(function(e,t,i){var a={};e.forEach(function(e,t){0==t&&(a.StationID=e.StationID,a.LineID=e.LineID,a.Direction=[[],[]]);var i=[e.ServiceDays.Sunday,e.ServiceDays.Monday,e.ServiceDays.Tuesday,e.ServiceDays.Wednesday,e.ServiceDays.Thursday,e.ServiceDays.Friday,e.ServiceDays.Saturday].map(function(e,t){return e?t.toString():""}).join(""),n=void 0,o=e.Timetables.map(function(e){return e.TrainType&&(n=e.TrainType),e.DepartureTime});a.Direction[e.Direction].push({To:e.DestinationStaionID,RouteID:e.RouteID,weekStr:i,TrainType:n,Timetables:o})}),i[t]=a}),t})}};this.catchData=g;var F=Object.keys(this);this.methodList=F};var H=h.getCompanyTag("trtc"),v=new h.baseMethod(H),_=v.catchData;v.catchData.config.Line_callback=function(e){return e.forEach(function(e){var t,a,n=e.TravelTime,o=[];e.Route.forEach(function(e){-1==o.indexOf(e.RouteID)&&"G-3"!=e.RouteID&&"R-3"!=e.RouteID&&o.push(e.RouteID),t=n.find(function(t){return t.RouteID==e.RouteID});for(var T=t.TravelTimes[0].FromTo[0]==e.Stations[0],r=[],m=[],s=0;s<e.Stations.length;s++)a=t.TravelTimes[s]||{RunTime:0,StopTime:0},r.push(a.RunTime),m.push(a.StopTime);T||(r.reverse().shift(),r.push(0),m.reverse()),e.TravelTime={RunTime:r,StopTime:m}}),delete e.TravelTime,e.main=o}),e},_.calcBRLineTime=function(){var e=_.getDataXLineObj("BR"),t=[];t.push(e.Route.find(function(e){return"BR-1"==e.RouteID&&0==e.Direction})),t.push(e.Route.find(function(e){return"BR-1"==e.RouteID&&1==e.Direction}));//2.把起站依照間距排出全日時刻表 , 按照 Frequency 數量分出要建立幾組時刻表
var i=[{StationID:t[0].Stations[0],DepTime:_.calcStationTimeByHeadWays(e,t[0].Stations[0],"BR-1",0)},{StationID:t[1].Stations[0],DepTime:_.calcStationTimeByHeadWays(e,t[1].Stations[0],"BR-1",1)}],a=[];//3.用 RunTime 與 StopTime 計算全線時刻表
i.forEach(function(i,n){i.DepTime.forEach(function(o){o.trainTime=[],o.stationTime=[],o.stationList=[],o.time.forEach(function(T){a=_.calcLineTimeByFirstStation(e,i.StationID,T,"BR-1",n),a.forEach(function(e,i){o.stationTime[i]=o.stationTime[i]||[],o.stationTime[i].push(e),o.stationList.push(t[n].Stations[i])}),o.trainTime.push(a)}),o.To=o.stationList[o.stationList.length-1];var T=o.trainTime[0],r=[];o.stationList.forEach(function(t,i){var a=_.getDataXStationData(t),m=a.FirstLast.find(function(e){return e.To==o.To}),s=!1,l=[];if(m){var D=m.Time[0];d.transTime2Sec(D)+60<d.transTime2Sec(T[i])&&(l=_.calcLineTimeByFirstStation(e,t,D,"BR-1",n),s=Array(i).concat(l),T=s,r.push(s),s.forEach(function(e,t){e&&o.stationTime[t].push(e)}))}}),o.trainTime=o.trainTime.concat(r)})});//4.找沿線車站的首班發車時間，早於首站的第一班車且早超過班距最大值時補上該站起始的車到順位最前面，依序算到倒數第二站
//先跳過
//5.將時間轉化為 TimeSimple 格式
var n=t[0].Stations.map(function(t){return{Direction:[[],[]],LineID:e.LineID,StationID:t}});return i.forEach(function(e,t){e.DepTime.forEach(function(e){e.stationTime.forEach(function(i,a){var o=i.map(function(e){return e}),T=e.stationList[a];n.find(function(e){return T==e.StationID}).Direction[t].push({RouteID:"BR-1",Timetables:o,To:e.stationList[e.stationList.length-1],weekStr:e.weekStr})})})}),n};var b={checkRouteIdOnUse:function(e,t){for(var a=this.getLineData(t),n=!1,o=0;o<a.route.length;o++)for(var T=0;T<a.route[o].work.length;T++)if(a.route[o].work[T].RouteID==e){n=!0;break}return n},getLineData:function(e){var t=!1;return g.trtc.line.forEach(function(i){(i.id==e||i.LineID==e)&&(t=i)}),t},getLineID:function(e){return this.getLineData(e).LineID},getOriginalLineByLineID:function(e){var t=!1;return g.trtc.line.forEach(function(i){i.LineID==e&&(t=i)}),t},getStationIDAry:function(e){for(var t=g.trtc.station_ary,a=!1,n=0;n<t.length;n++)if(t[n].id==e){a=t[n].StationID;break}return a},getStationID:function(e,t){var i=/^trtc/.test(t)?this.getLineID(t):t,a=this.getStationIDAry(e);if(!i)return!1;var n=!1,o="",T=0;return a.forEach(function(e){/^[a-zA-Z]{1}\d{2}/gi.test(e)?T=1:/^[a-zA-Z]{2}\d{2}/gi.test(e)&&(T=2),o=e.substr(0,T),o==i&&(n=e)}),n},getStationIDInWhatLine:function(e){return /^[a-zA-Z]{1}\d{2}/gi.test(e)?e.substr(0,1):/^[a-zA-Z]{2}\d{2}/gi.test(e)?e.substr(0,2):void 0},getStationTime:function(t,i,a,n){var o=!1,T=this;"string"!=typeof i&&2==i.length&&(o=i[1],i=i[0]);var e=!1;"number"==typeof a&&(e=d.ptxMRTWeekStr[a]);var r="$filter=LineID eq '"+t+"' and StationID eq '"+i+"'";e&&(r+=" and ServiceDays/"+e+" eq true");var m=d.metroURL+"/StationTimeTable/TRTC?"+encodeURI(r)+"&$top=3000&$format=JSON";d.pui.printStatus("\u7DDA\u4E0A\u5C0B\u627E\u6377\u904B "+i+" \u7AD9\u6642\u523B\u8868"),u.tempTimeTable.trtc||(u.tempTimeTable.trtc={}),u.tempTimeTable.trtc[t]||(u.tempTimeTable.trtc[t]=[]),u.tempTimeTable.trtc[t][i]||(u.tempTimeTable.trtc[t][i]=[]),u.tempTimeTable.trtc[t][i][a]=[[],[]],u.getURL(m,function(o,r){if(r.status==d.CONST_PTX_API_FAIL)return n(o),!1;o.forEach(function(e){var n=u.tempTimeTable.trtc[t][i][a],o=e.Timetables.map(function(t){return t.tt_sortTime=TT.fn.transTime2Sec(t.DepartureTime),t.RouteID=e.RouteID,t});T.checkRouteIdOnUse(e.RouteID,e.LineID)&&(0==e.Direction?n[0]=n[0].concat(o):1==e.Direction&&(n[1]=n[1].concat(o)))});var e=u.tempTimeTable.trtc[t][i][a],m=function(e){return e.DepartureTime};e[0]=e[0].sort(u.sortByTTSortTime),e[0]=e[0].map(m),e[1]=e[1].sort(u.sortByTTSortTime),e[1]=e[1].map(m),n(o)})},getFormatStationTime:function(e,t,i,a){a=parseInt(a);var n=u.trtc.getStationID(e,t),o=u.trtc.getLineID(t);return!!u.tempTimeTable.trtc&&!!u.tempTimeTable.trtc[o]&&!!u.tempTimeTable.trtc[o][n]&&!!u.tempTimeTable.trtc[o][n][a]&&!!u.tempTimeTable.trtc[o][n][a][i]&&0!=u.tempTimeTable.trtc[o][n][a][i].length&&u.tempTimeTable.trtc[o][n][a][i]},getOriginalStationID:function(e){for(var t=g.trtc.station_ary,a=!1,n=0;n<t.length;n++)if(-1!=t[n].StationID.indexOf(e)){a=t[n].id;break}return a}};v.methodList.forEach(function(e){b[e]=v[e]});var G=h.getCompanyTag("krtc"),C=new h.baseMethod(G);C.catchData.config.Line_callback=function(e){return e.forEach(function(e){var t,a,n=e.TravelTime;e.Route.forEach(function(e){t=n.find(function(t){return t.RouteID==e.RouteID});//高雄捷運 TravelTimes 有重複值要先濾除
var o=[],T=[];t.TravelTimes.forEach(function(e){-1==o.indexOf(e.FromTo[0])&&("R11"==e.FromTo[0]&&-1==o.indexOf("R10")&&T.push({RunTime:180,StopTime:40}),T.push(e),o.push(e.FromTo[0]))});for(var r=T[0].FromTo[0]==e.Stations[0],m=[],s=[],l=0;l<e.Stations.length;l++)a=T[l]||{RunTime:0,StopTime:0},m.push(a.RunTime),s.push(a.StopTime);r||(m.reverse().shift(),m.push(0),s.reverse()),e.TravelTime={RunTime:m,StopTime:s}}),delete e.TravelTime}),e};var P={checkRouteIdOnUse:function(e,t){for(var a=this.getLineData(t),n=!1,o=0;o<a.route.length;o++)for(var T=0;T<a.route[o].work.length;T++)if(a.route[o].work[T].RouteID==e){n=!0;break}return n},getLineData:function(e){var t=!1;return g.krtc.line.forEach(function(i){(i.id==e||i.LineID==e)&&(t=i)}),t},getLineID:function(e){return this.getLineData(e).LineID},getOriginalLineByLineID:function(e){var t=!1;return g.krtc.line.forEach(function(i){i.LineID==e&&(t=i)}),t},getStationIDAry:function(e){for(var t=g.krtc.station_ary,a=!1,n=0;n<t.length;n++)if(t[n].id==e){a=t[n].StationID;break}return a},getStationID:function(e,t){var i=/^krtc/.test(t)?this.getLineID(t):t,a=this.getStationIDAry(e);if(!i)return!1;var n=!1,o="",T=0;return a.forEach(function(e){/^[a-zA-Z]{1}\d{2}/gi.test(e)?T=1:/^[a-zA-Z]{2}\d{2}/gi.test(e)&&(T=2),o=e.substr(0,T),o==i&&(n=e)}),n},getStationIDInWhatLine:function(e){return /^[a-zA-Z]{1}\d{2}/gi.test(e)?e.substr(0,1):/^[a-zA-Z]{2}\d{2}/gi.test(e)?e.substr(0,2):void 0},getStationTime:function(t,i,a,n){var o=!1,T=this;"string"!=typeof i&&2==i.length&&(o=i[1],i=i[0]);var e=!1;"number"==typeof a&&(e=d.ptxMRTWeekStr[a]);var r="$filter=LineID eq '"+t+"' and StationID eq '"+i+"'";e&&(r+=" and ServiceDays/"+e+" eq true");var m=d.metroURL+"/StationTimeTable/KRTC?"+encodeURI(r)+"&$top=3000&$format=JSON";d.pui.printStatus("\u7DDA\u4E0A\u5C0B\u627E\u6377\u904B "+i+" \u7AD9\u6642\u523B\u8868"),u.tempTimeTable.krtc||(u.tempTimeTable.krtc={}),u.tempTimeTable.krtc[t]||(u.tempTimeTable.krtc[t]=[]),u.tempTimeTable.krtc[t][i]||(u.tempTimeTable.krtc[t][i]=[]),u.tempTimeTable.krtc[t][i][a]=[[],[]],u.getURL(m,function(o,r){if(r.status==d.CONST_PTX_API_FAIL)return n(o),!1;o.forEach(function(e){var n=u.tempTimeTable.krtc[t][i][a],o=e.Timetables.map(function(t){return t.tt_sortTime=TT.fn.transTime2Sec(t.DepartureTime),t.RouteID=e.RouteID,t});T.checkRouteIdOnUse(e.RouteID,e.LineID)&&(0==e.Direction?n[0]=n[0].concat(o):1==e.Direction&&(n[1]=n[1].concat(o)))});var e=u.tempTimeTable.krtc[t][i][a],m=function(e){return e.DepartureTime};e[0]=e[0].sort(u.sortByTTSortTime),e[0]=e[0].map(m),e[1]=e[1].sort(u.sortByTTSortTime),e[1]=e[1].map(m),n(o)})},getFormatStationTime:function(e,t,i,a){a=parseInt(a);var n=u.krtc.getStationID(e,t),o=u.krtc.getLineID(t);return!!u.tempTimeTable.krtc&&!!u.tempTimeTable.krtc[o]&&!!u.tempTimeTable.krtc[o][n]&&!!u.tempTimeTable.krtc[o][n][a]&&!!u.tempTimeTable.krtc[o][n][a][i]&&0!=u.tempTimeTable.krtc[o][n][a][i].length&&u.tempTimeTable.krtc[o][n][a][i]},getOriginalStationID:function(e){for(var t=g.krtc.station_ary,a=!1,n=0;n<t.length;n++)if(-1!=t[n].StationID.indexOf(e)){a=t[n].id;break}return a}};C.methodList.forEach(function(e){P[e]=C[e]});var x=h.getCompanyTag("tymetro"),N=new h.baseMethod(x);N.catchData.config.Line_S2STravelTime_BackTag=["LineID","RouteID","TrainType","LineNo","TravelTimes"],N.catchData.config.Line_Frequency_BackTag=["LineID","RouteID","TrainType","LineNo","ServiceDays","OperationTime","Headways"],N.catchData.config.Station_FirstLastTimetable_BackTag=["LineID","StationID","TrainType","DestinationStaionID","FirstTrainTime","LastTrainTime"],N.catchData.config.Station_Fare_BackTag=["OriginStationID","DestinationStationID","Fares","TrainType"],N.catchData.config.Line_callback=function(e){return e.forEach(function(e){if("A"==e.LineID){var t=e.TravelTime,i={},a={};t.forEach(function(e,n){var o=1==e.TrainType?i:a;e.TravelTimes.forEach(function(e){o[e.FromTo[0]]||(o[e.FromTo[0]]={}),o[e.FromTo[0]][e.FromTo[1]]=e.RunTime}),t[n]=void 0}),e.TravelTimeBetween={TrainType1:i,TrainType2:a}}}),e};var E={checkRouteIdOnUse:function(e,t){for(var a=this.getLineData(t),n=!1,o=0;o<a.route.length;o++)for(var T=0;T<a.route[o].work.length;T++)if(a.route[o].work[T].RouteID==e){n=!0;break}return n},getLineData:function(e){var t=!1;return g.tymetro.line.forEach(function(i){(i.id==e||i.LineID==e)&&(t=i)}),t},getLineID:function(e){return this.getLineData(e).LineID},getOriginalLineByLineID:function(e){var t=!1;return g.tymetro.line.forEach(function(i){i.LineID==e&&(t=i)}),t},getStationIDAry:function(e){for(var t=g.tymetro.station_ary,a=!1,n=0;n<t.length;n++)if(t[n].id==e){a=t[n].StationID;break}return a},getStationID:function(e,t){var i=/^tymetro/.test(t)?this.getLineID(t):t,a=this.getStationIDAry(e);if(!i)return!1;var n=!1,o="",T=0;return a.forEach(function(e){/^[a-zA-Z]{1}\d{2}/gi.test(e)?T=1:/^[a-zA-Z]{2}\d{2}/gi.test(e)&&(T=2),o=e.substr(0,T),o==i&&(n=e)}),n},getStationIDInWhatLine:function(e){return /^[a-zA-Z]{1}\d{2}/gi.test(e)?e.substr(0,1):/^[a-zA-Z]{2}\d{2}/gi.test(e)?e.substr(0,2):void 0},getStationTime:function(t,i,a,n){var o=!1,T=this;"string"!=typeof i&&2==i.length&&(o=i[1],i=i[0]);var e=!1;"number"==typeof a&&(e=d.ptxMRTWeekStr[a]);var r="$filter=LineID eq '"+t+"' and StationID eq '"+i+"'";e&&(r+=" and ServiceDays/"+e+" eq true");var m=d.metroURL+"/StationTimeTable/TYMC?"+encodeURI(r)+"&$top=3000&$format=JSON";d.pui.printStatus("\u7DDA\u4E0A\u5C0B\u627E\u6377\u904B "+i+" \u7AD9\u6642\u523B\u8868"),u.tempTimeTable.tymetro||(u.tempTimeTable.tymetro={}),u.tempTimeTable.tymetro[t]||(u.tempTimeTable.tymetro[t]=[]),u.tempTimeTable.tymetro[t][i]||(u.tempTimeTable.tymetro[t][i]=[]),u.tempTimeTable.tymetro[t][i][a]=[[],[]],u.getURL(m,function(o,r){if(r.status==d.CONST_PTX_API_FAIL)return n(o),!1;o.forEach(function(e){var n=u.tempTimeTable.tymetro[t][i][a],o=e.Timetables.map(function(t){return t.tt_sortTime=TT.fn.transTime2Sec(t.DepartureTime),t.RouteID=e.RouteID,t});T.checkRouteIdOnUse(e.RouteID,e.LineID)&&(0==e.Direction?n[0]=n[0].concat(o):1==e.Direction&&(n[1]=n[1].concat(o)))});var e=u.tempTimeTable.tymetro[t][i][a],m=function(e){return e.DepartureTime};e[0]=e[0].sort(u.sortByTTSortTime),e[0]=e[0].map(m),e[1]=e[1].sort(u.sortByTTSortTime),e[1]=e[1].map(m),n(o)})},getFormatStationTime:function(e,t,i,a){a=parseInt(a);var n=u.tymetro.getStationID(e,t),o=u.tymetro.getLineID(t);return!!u.tempTimeTable.tymetro&&!!u.tempTimeTable.tymetro[o]&&!!u.tempTimeTable.tymetro[o][n]&&!!u.tempTimeTable.tymetro[o][n][a]&&!!u.tempTimeTable.tymetro[o][n][a][i]&&0!=u.tempTimeTable.tymetro[o][n][a][i].length&&u.tempTimeTable.tymetro[o][n][a][i]},getOriginalStationID:function(e){for(var t=g.tymetro.station_ary,a=!1,n=0;n<t.length;n++)if(-1!=t[n].StationID.indexOf(e)){a=t[n].id;break}return a}};N.methodList.forEach(function(e){E[e]=N[e]});var U=h.getCompanyTag("klrt"),X=new h.baseMethod(U),q={checkRouteIdOnUse:function(e,t){for(var a=this.getLineData(t),n=!1,o=0;o<a.route.length;o++)for(var T=0;T<a.route[o].work.length;T++)if(a.route[o].work[T].RouteID==e){n=!0;break}return n},getLineData:function(e){var t=!1;return g.klrt.line.forEach(function(i){(i.id==e||i.LineID==e)&&(t=i)}),t},getLineID:function(e){return this.getLineData(e).LineID},getOriginalLineByLineID:function(e){var t=!1;return g.klrt.line.forEach(function(i){i.LineID==e&&(t=i)}),t},getStationIDAry:function(e){for(var t=g.klrt.station_ary,a=!1,n=0;n<t.length;n++)if(t[n].id==e){a=t[n].StationID;break}return a},getStationID:function(e,t){var i=/^klrt/.test(t)?this.getLineID(t):t,a=this.getStationIDAry(e);if(!i)return!1;var n=!1,o="",T=0;return a.forEach(function(e){/^[a-zA-Z]{1}\d{2}/gi.test(e)?T=1:/^[a-zA-Z]{2}\d{2}/gi.test(e)&&(T=2),o=e.substr(0,T),o==i&&(n=e)}),n},getStationIDInWhatLine:function(e){return /^[a-zA-Z]{1}\d{2}/gi.test(e)?e.substr(0,1):/^[a-zA-Z]{2}\d{2}/gi.test(e)?e.substr(0,2):void 0},getStationTime:function(t,i,a,n){var o=!1,T=this;"string"!=typeof i&&2==i.length&&(o=i[1],i=i[0]);var e=!1;"number"==typeof a&&(e=d.ptxMRTWeekStr[a]);var r="$filter=LineID eq '"+t+"' and StationID eq '"+i+"'";e&&(r+=" and ServiceDays/"+e+" eq true");var m=d.metroURL+"/StationTimeTable/KLRT?"+encodeURI(r)+"&$top=3000&$format=JSON";d.pui.printStatus("\u7DDA\u4E0A\u5C0B\u627E\u6377\u904B "+i+" \u7AD9\u6642\u523B\u8868"),u.tempTimeTable.klrt||(u.tempTimeTable.klrt={}),u.tempTimeTable.klrt[t]||(u.tempTimeTable.klrt[t]=[]),u.tempTimeTable.klrt[t][i]||(u.tempTimeTable.klrt[t][i]=[]),u.tempTimeTable.klrt[t][i][a]=[[],[]],u.getURL(m,function(o,r){if(r.status==d.CONST_PTX_API_FAIL)return n(o),!1;o.forEach(function(e){var n=u.tempTimeTable.klrt[t][i][a],o=e.Timetables.map(function(t){return t.tt_sortTime=TT.fn.transTime2Sec(t.DepartureTime),t.RouteID=e.RouteID,t});T.checkRouteIdOnUse(e.RouteID,e.LineID)&&(0==e.Direction?n[0]=n[0].concat(o):1==e.Direction&&(n[1]=n[1].concat(o)))});var e=u.tempTimeTable.klrt[t][i][a],m=function(e){return e.DepartureTime};e[0]=e[0].sort(u.sortByTTSortTime),e[0]=e[0].map(m),e[1]=e[1].sort(u.sortByTTSortTime),e[1]=e[1].map(m),n(o)})},getFormatStationTime:function(e,t,i,a){a=parseInt(a);var n=u.klrt.getStationID(e,t),o=u.klrt.getLineID(t);return!!u.tempTimeTable.klrt&&!!u.tempTimeTable.klrt[o]&&!!u.tempTimeTable.klrt[o][n]&&!!u.tempTimeTable.klrt[o][n][a]&&!!u.tempTimeTable.klrt[o][n][a][i]&&0!=u.tempTimeTable.klrt[o][n][a][i].length&&u.tempTimeTable.klrt[o][n][a][i]},getOriginalStationID:function(e){for(var t=g.klrt.station_ary,a=!1,n=0;n<t.length;n++)if(-1!=t[n].StationID.indexOf(e)){a=t[n].id;break}return a}};X.methodList.forEach(function(e){q[e]=X[e]});var j=d.traURL,W={Network:j+"/Network",//取得臺鐵路網資料
Line:j+"/Line/",//取得路線基本資料
Station:j+"/Station/",//取得車站基本資料
StationOfLine:j+"/StationOfLine/",//取得路線車站基本資料
TrainType:j+"/TrainType",//取得所有列車車種資料
ODFare:j+"/ODFare/",//取得票價資料
Shape:j+"/Shape/",//取得指定營運業者之軌道路網實體路線圖資資料
GeneralTrainInfo:j+"/GeneralTrainInfo/",//取得所有車次的定期車次資料
GeneralTimetable:j+"/GeneralTimetable/",//取得所有車次的定期時刻表資料
DailyTrainInfo_Today:j+"/DailyTrainInfo/Today/",//取得當天所有車次的車次資料
DailyTimetable_Today:j+"/DailyTimetable/Today/",//取得當天所有車次的時刻表資料
LiveBoard:j+"/LiveBoard/",//取得車站別列車即時到離站電子看板
LiveTrainDelay:j+"/LiveTrainDelay/",//取得列車即時準點/延誤時間資料
//以下為帶有變數的 API
ODFareFromTo:j+"/ODFare/{OriginStationID}/to/{DestinationStationID}",//取得指定[起訖站間]之票價資料
GeneralTrainInfo_TrainNo:j+"/GeneralTrainInfo/TrainNo/{TrainNo}",//取得指定[車次]的定期車次資料
GeneralTimetable_TrainNo:j+"/GeneralTimetable/TrainNo/{TrainNo}",//取得指定[車次]的定期時刻表資料
DailyTrainInfo_Today_TrainNo:j+"/DailyTrainInfo/Today/TrainNo/{TrainNo}",//取得當天指定[車次]的車次資料
DailyTrainInfo_TrainDate:j+"/DailyTrainInfo/TrainDate/{TrainDate}",//取得指定[日期]所有車次的車次資料 yyyy-MM-dd
DailyTrainInfo_TrainNo_TrainDate:j+"/DailyTrainInfo/TrainNo/{TrainNo}/TrainDate/{TrainDate}",//取得指定[日期]與[車次]的車次資料
DailyTimetable_Today_TrainNo:j+"/DailyTimetable/Today/TrainNo/{TrainNo}",//取得當天指定[車次]的時刻表資料
DailyTimetable_TrainDate_TrainNo:j+"/DailyTimetable/TrainDate/{TrainDate}",//取得指定[日期]所有車次的時刻表資料
DailyTimetable_TrainNo_TrainDate:j+"/DailyTimetable/TrainNo/{TrainNo}/TrainDate/{TrainDate}",//取得指定[日期],[車次]的時刻表資料
DailyTimetable_Station_TrainDate:j+"/DailyTimetable/Station/{StationID}/{TrainDate}",//取得指定[日期],[車站]的站別時刻表資料
DailyTimetable_OD_TrainDate:j+"/DailyTimetable/OD/{OriginStationID}/to/{DestinationStationID}/{TrainDate}",//取得指定[日期],[起迄站間]之站間時刻表資料
LiveBoard_Station:j+"/LiveBoard/Station/{StationID}"//取得指定[車站]列車即時到離站電子看板(動態前後30分鐘的車次)
},Z={queryCount:1e4,format:"JSON"},Y=u.getPromiseURL,J={companyTag:"TRA",urls:W,vars:Z,getStationOfLine:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=I(e,t),J._StationOfLine(t)},getStation:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t=L(e,t),J._Station(t)},getStationFare:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.filterBy=t.filterBy||"",t.filterBy+=TT.ptx.filterParam("OriginStationID","==",e),J._ODFare(t)},getStationTodayTimeTable:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new Date,a=i.getFullYear()+"-"+d.appendNumber0(i.getMonth()+1)+"-"+d.appendNumber0(i.getDate());return J._DailyTimetable_Station_TrainDate(e,a,t)}//產生整包抓取 Function
},K={config:{Line_callback:function(e){//通用預處理
return e},Line_callback_final:function(e){//私用預處理
return e}},Line:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8DEF\u7DDA\u4E2D");var t=J._StationOfLine().then(function(e){return e.data}).catch(function(e){return e});return t},GeneralTimetable:function(e){"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u6642\u523B\u4E2D");var t=J._GeneralTimetable().then(function(e){return e.data.map(function(e){return e.GeneralTimetable.UpdateTime=e.UpdateTime,e.GeneralTimetable.VersionID=e.VersionID,e.GeneralTimetable})}).catch(function(e){return e});return t},Station:function(e){return"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8ECA\u7AD9\u4E2D"),J._Station().then(function(e){return e.data.map(function(e){return{StationID:e.StationID,lat:e.StationPosition.PositionLat,lon:e.StationPosition.PositionLon,name:e.StationName.Zh_tw,ename:e.StationName.En}})}).catch(function(e){return e})},TrainType:function(e){return"function"!=typeof e&&(e=function(){}),e("\u53D6\u5F97\u8ECA\u7A2E\u4E2D"),J._TrainType().then(function(e){return e.data.map(function(e){var t=e.TrainTypeName.Zh_tw.split("(");return t[1]&&(t[1]=t[1].replace(")","")),{TrainTypeID:e.TrainTypeID,TrainTypeCode:e.TrainTypeCode,note:t[1]||"",name:t[0],ename:e.TrainTypeName.En}})}).catch(function(e){return e})},SimpleLine:function(e){"function"!=typeof e&&(e=function(){});//區分要抓的 line 在資料中是順時針或逆時針方向
var t=["CZ","YL","NL","TT","PX","NW","LJ"],i={filterBy:u.filterParam("LineID","==",t.concat(["TL-N","TL-M","TL-C","TL-S","PL","SL","SA","JJ","SH"]),"or")};e("\u53D6\u5F97\u8DEF\u7DDA\u4E2D");var a=J._StationOfLine(i).then(function(e){return e.data.map(function(e){var i=e.Stations.sort(function(e,t){return e.Sequence>t.Sequence?1:-1}).map(function(e){return{name:e.StationName,ID:e.StationID,TD:e.TraveledDistance}});return{dir:-1==t.indexOf(e.LineID)?1:0,LineID:e.LineID,station:i}})}).catch(function(e){return e});return a},SimpleTimetable:function(e){return K.GeneralTimetable(e).then(function(e){return e.forEach(function(e,t){var i=[e.ServiceDay.Sunday,e.ServiceDay.Monday,e.ServiceDay.Tuesday,e.ServiceDay.Wednesday,e.ServiceDay.Thursday,e.ServiceDay.Friday,e.ServiceDay.Saturday].map(function(e,t){return e?t.toString():""}).join("");e.weekStr=i,delete e.ServiceDay,e.StopTimes.sort(function(e,t){return e.StopSequence>t.StopSequence?1:-1}),e.stopTime=e.StopTimes.map(function(e){return{Arr:e.ArrivalTime,Dep:e.DepartureTime,ID:e.StationID,name:e.StationName.Zh_tw}}),delete e.StopTimes,e.info={};var a=["EndingStationName","StartingStationName","TrainTypeName"];for(var n in e.GeneralTrainInfo)-1==a.indexOf(n)&&(e.info[n]=e.GeneralTrainInfo[n]);delete e.GeneralTrainInfo,0<t&&(delete e.UpdateTime,delete e.VersionID)}),e})}};J.catchData=K;var $=Object.keys(W),z=[];$.forEach(function(e){if(!/\{/.test(W[e]))J["_"+e]=function(t){return R(e,t)},z.push("_"+e);else{//處理有動態參數的
var t=W[e].split("/"),i=0,a=[];t.forEach(function(e){/^\{/.test(e)&&(i++,a.push(e))}),J["_"+e]=function(){var e=0,n=arguments;if(n.length<i)throw"Lose parameter, need "+a.join();var o=t.map(function(t){return /^\{/.test(t)&&(t=n[e],e++),t}).join("/"),T=arguments[i];T=D(T);var r=S(T);return Y(o+r,T)}}}),J.ptxAutoTRAFunctionKey=z,J.getStationLiveBoard=J._LiveBoard_Station,J.getFromToFare=J._ODFareFromTo;//alias
var Q=d.inBrowser,V={data:g,datax:{trtc:{line:[{LineID:"BR",LineName:{Zh_tw:"\u6587\u6E56\u7DDA",En:"Wenhu Line"},LineColor:"#b57a25",IsBranch:!1,Route:[{RouteID:"BR-1",Direction:0,LineID:"BR",Stations:["BR01","BR02","BR03","BR04","BR05","BR06","BR07","BR08","BR09","BR10","BR11","BR12","BR13","BR14","BR15","BR16","BR17","BR18","BR19","BR20","BR21","BR22","BR23","BR24"],TravelTime:{RunTime:[67,47,99,106,124,72,122,69,67,86,66,142,172,103,110,65,72,78,71,121,78,85,78,0],StopTime:[0,25,18,20,18,18,20,25,30,45,35,35,18,25,25,25,25,25,20,18,20,20,18,0]}},{RouteID:"BR-1",Direction:1,LineID:"BR",Stations:["BR24","BR23","BR22","BR21","BR20","BR19","BR18","BR17","BR16","BR15","BR14","BR13","BR12","BR11","BR10","BR09","BR08","BR07","BR06","BR05","BR04","BR03","BR02","BR01"],TravelTime:{RunTime:[78,85,78,121,71,78,72,65,110,103,172,142,66,86,67,69,122,72,124,106,99,47,67,0],StopTime:[0,18,20,20,18,20,25,25,25,25,25,18,35,35,45,30,25,20,18,18,20,18,25,0]}}],Transfer:[{FromLineID:"BR",FromStationID:"BR09",ToLineID:"R",ToStationID:"R05",IsOnSiteTransfer:1,TransferTime:5},{FromLineID:"BR",FromStationID:"BR11",ToLineID:"G",ToStationID:"G16",IsOnSiteTransfer:1,TransferTime:5},{FromLineID:"BR",FromStationID:"BR24",ToLineID:"BL",ToStationID:"BL23",IsOnSiteTransfer:1,TransferTime:5},{FromLineID:"BR",FromStationID:"BR10",ToLineID:"BL",ToStationID:"BL15",IsOnSiteTransfer:1,TransferTime:5}],Frequency:[{LineID:"BR",RouteID:"BR-1",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:4,MaxHeadwayMins:7,Time:["06:00","07:00"],AveMins:6},{PeakFlag:"1",MinHeadwayMins:2,MaxHeadwayMins:4,Time:["07:00","09:00"],AveMins:3},{PeakFlag:"0",MinHeadwayMins:4,MaxHeadwayMins:7,Time:["09:00","17:00"],AveMins:6},{PeakFlag:"1",MinHeadwayMins:2,MaxHeadwayMins:4,Time:["17:00","19:30"],AveMins:3},{PeakFlag:"0",MinHeadwayMins:4,MaxHeadwayMins:7,Time:["19:30","23:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"BR",RouteID:"BR-1",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:4,MaxHeadwayMins:7,Time:["06:00","23:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]}],main:["BR-1"]},{LineID:"R",LineName:{Zh_tw:"\u6DE1\u6C34\u4FE1\u7FA9\u7DDA",En:"Tamsui-Xinyi Line"},LineColor:"#d90023",IsBranch:!1,Route:[{RouteID:"R-1",Direction:0,LineID:"R",Stations:["R02","R03","R04","R05","R06","R07","R08","R09","R10","R11","R12","R13","R14","R15","R16","R17","R18","R19","R20","R21","R22","R23","R24","R25","R26","R27","R28"],TravelTime:{RunTime:[93,81,81,70,65,165,83,63,65,58,57,90,109,92,91,76,61,100,73,91,145,109,78,145,136,175,0],StopTime:[0,30,30,30,30,35,35,25,45,30,25,35,25,25,25,25,25,25,25,25,25,25,25,25,25,25,0]}},{RouteID:"R-1",Direction:1,LineID:"R",Stations:["R28","R27","R26","R25","R24","R23","R22","R21","R20","R19","R18","R17","R16","R15","R14","R13","R12","R11","R10","R09","R08","R07","R06","R05","R04","R03","R02"],TravelTime:{RunTime:[175,136,145,78,109,145,91,73,100,61,76,91,92,109,90,57,58,65,63,83,165,65,70,81,81,93,0],StopTime:[0,25,25,25,25,25,25,25,25,25,25,25,25,25,25,35,25,30,45,25,35,35,30,30,30,30,0]}},{RouteID:"R-2",Direction:0,LineID:"R",Stations:["R05","R06","R07","R08","R09","R10","R11","R12","R13","R14","R15","R16","R17","R18","R19","R20","R21","R22"],TravelTime:{RunTime:[70,65,165,83,63,65,58,57,90,109,92,91,76,61,100,73,91,0],StopTime:[0,30,35,35,25,45,30,25,35,25,25,25,25,25,25,25,25,0]}},{RouteID:"R-2",Direction:1,LineID:"R",Stations:["R22","R21","R20","R19","R18","R17","R16","R15","R14","R13","R12","R11","R10","R09","R08","R07","R06","R05"],TravelTime:{RunTime:[91,73,100,61,76,91,92,109,90,57,58,65,63,83,165,65,70,0],StopTime:[0,25,25,25,25,25,25,25,25,35,25,30,45,25,35,35,30,0]}},{RouteID:"R-3",Direction:0,LineID:"R",Stations:["R22","R22A"],TravelTime:{RunTime:[157,0],StopTime:[0,0]}},{RouteID:"R-3",Direction:1,LineID:"R",Stations:["R22A","R22"],TravelTime:{RunTime:[157,0],StopTime:[0,0]}}],Transfer:[{FromLineID:"R",FromStationID:"R22",ToLineID:"R",ToStationID:"R22",IsOnSiteTransfer:1,TransferTime:3},{FromLineID:"R",FromStationID:"R13",ToLineID:"O",ToStationID:"O11",IsOnSiteTransfer:1,TransferTime:3},{FromLineID:"R",FromStationID:"R11",ToLineID:"G",ToStationID:"G14",IsOnSiteTransfer:1,TransferTime:3},{FromLineID:"R",FromStationID:"R10",ToLineID:"BL",ToStationID:"BL12",IsOnSiteTransfer:1,TransferTime:4},{FromLineID:"R",FromStationID:"R08",ToLineID:"G",ToStationID:"G10",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"R",FromStationID:"R07",ToLineID:"O",ToStationID:"O06",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"R",FromStationID:"R05",ToLineID:"BR",ToStationID:"BR09",IsOnSiteTransfer:1,TransferTime:5}],Frequency:[{LineID:"R",RouteID:"R-1",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","09:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"R",RouteID:"R-1",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"R",RouteID:"R-2",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"R",RouteID:"R-2",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","09:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"R",RouteID:"R-3",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:15,Time:["06:00","06:30"],AveMins:14},{PeakFlag:"1",MinHeadwayMins:7,MaxHeadwayMins:8,Time:["06:30","09:00"],AveMins:8},{PeakFlag:"0",MinHeadwayMins:10,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:10},{PeakFlag:"1",MinHeadwayMins:7,MaxHeadwayMins:8,Time:["17:00","19:30"],AveMins:8},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:15,Time:["23:00","00:00"],AveMins:14}]},{LineID:"R",RouteID:"R-3",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:10,MaxHeadwayMins:12,Time:["06:00","23:00"],AveMins:11},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:15,Time:["23:00","00:00"],AveMins:14}]}],main:["R-1","R-2"]},{LineID:"G",LineName:{Zh_tw:"\u677E\u5C71\u65B0\u5E97\u7DDA",En:"Songshan-Xindian Line"},LineColor:"#107547",IsBranch:!1,Route:[{RouteID:"G-1",Direction:0,LineID:"G",Stations:["G01","G02","G03","G04","G05","G06","G07","G08","G09","G10","G11","G12","G13","G14","G15","G16","G17","G18","G19"],TravelTime:{RunTime:[111,78,75,89,87,119,67,88,83,75,81,75,114,106,92,84,102,138,0],StopTime:[0,22,25,25,25,25,25,25,25,25,25,35,30,35,35,35,30,30,0]}},{RouteID:"G-1",Direction:1,LineID:"G",Stations:["G19","G18","G17","G16","G15","G14","G13","G12","G11","G10","G09","G08","G07","G06","G05","G04","G03","G02","G01"],TravelTime:{RunTime:[138,102,84,92,106,114,75,81,75,83,88,67,119,87,89,75,78,111,0],StopTime:[0,30,30,35,35,35,30,35,25,25,25,25,25,25,25,25,25,22,0]}},{RouteID:"G-2",Direction:0,LineID:"G",Stations:["G08","G09","G10","G11","G12","G13","G14","G15","G16","G17","G18","G19"],TravelTime:{RunTime:[88,83,75,81,75,114,106,92,84,102,138,0],StopTime:[0,25,25,25,35,30,35,35,35,30,30,0]}},{RouteID:"G-2",Direction:1,LineID:"G",Stations:["G19","G18","G17","G16","G15","G14","G13","G12","G11","G10","G09","G08"],TravelTime:{RunTime:[138,102,84,92,106,114,75,81,75,83,88,0],StopTime:[0,30,30,35,35,35,30,35,25,25,25,0]}},{RouteID:"G-3",Direction:0,LineID:"G",Stations:["G03","G03A"],TravelTime:{RunTime:[203,0],StopTime:[0,0]}},{RouteID:"G-3",Direction:1,LineID:"G",Stations:["G03A","G03"],TravelTime:{RunTime:[203,0],StopTime:[0,0]}}],Transfer:[{FromLineID:"G",FromStationID:"G14",ToLineID:"R",ToStationID:"R11",IsOnSiteTransfer:1,TransferTime:3},{FromLineID:"G",FromStationID:"G10",ToLineID:"R",ToStationID:"R08",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"G",FromStationID:"G16",ToLineID:"BR",ToStationID:"BR11",IsOnSiteTransfer:1,TransferTime:5},{FromLineID:"G",FromStationID:"G15",ToLineID:"O",ToStationID:"O08",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"G",FromStationID:"G12",ToLineID:"BL",ToStationID:"BL11",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"G",FromStationID:"G09",ToLineID:"O",ToStationID:"O05",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"G",FromStationID:"G03",ToLineID:"G",ToStationID:"G03",IsOnSiteTransfer:1,TransferTime:3}],Frequency:[{LineID:"G",RouteID:"G-1",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","09:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["09:00","23:00"],AveMins:7},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"G",RouteID:"G-1",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["06:00","07:00"],AveMins:7},{PeakFlag:"1",MinHeadwayMins:4,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:5},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["09:00","17:00"],AveMins:7},{PeakFlag:"1",MinHeadwayMins:4,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:5},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["19:30","23:00"],AveMins:7},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"G",RouteID:"G-2",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["06:00","07:00"],AveMins:7},{PeakFlag:"1",MinHeadwayMins:4,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:5},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["09:00","17:00"],AveMins:7},{PeakFlag:"1",MinHeadwayMins:4,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:5},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["19:30","23:00"],AveMins:7},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"G",RouteID:"G-2",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","09:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:6,MaxHeadwayMins:8,Time:["09:00","23:00"],AveMins:7},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"G",RouteID:"G-3",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:20,Time:["06:00","00:00"],AveMins:16}]},{LineID:"G",RouteID:"G-3",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:20,Time:["06:00","00:00"],AveMins:16}]}],main:["G-1","G-2"]},{LineID:"O",LineName:{Zh_tw:"\u4E2D\u548C\u65B0\u8606\u7DDA",En:"Zhonghe-Xinlu Line"},LineColor:"#f5a818",IsBranch:!1,Route:[{RouteID:"O-1",Direction:0,LineID:"O",Stations:["O01","O02","O03","O04","O05","O06","O07","O08","O09","O10","O11","O12","O13","O14","O15","O16","O17","O18","O19","O20","O21"],TravelTime:{RunTime:[103,88,100,187,192,118,114,75,89,72,75,115,93,84,142,105,93,130,110,159,0],StopTime:[0,25,25,25,40,35,35,35,35,35,45,35,25,25,25,25,25,25,25,25,0]}},{RouteID:"O-1",Direction:1,LineID:"O",Stations:["O21","O20","O19","O18","O17","O16","O15","O14","O13","O12","O11","O10","O09","O08","O07","O06","O05","O04","O03","O02","O01"],TravelTime:{RunTime:[159,110,130,93,105,142,84,93,115,75,72,89,75,114,118,192,187,100,88,103,0],StopTime:[0,25,25,25,25,25,25,25,25,35,45,35,35,35,35,35,40,25,25,25,0]}},{RouteID:"O-2",Direction:0,LineID:"O",Stations:["O01","O02","O03","O04","O05","O06","O07","O08","O09","O10","O11","O12","O50","O51","O52","O53","O54"],TravelTime:{RunTime:[103,88,100,187,192,118,114,75,89,72,75,148,104,82,87,110,0],StopTime:[0,25,25,25,40,35,35,35,35,35,45,35,30,30,30,30,0]}},{RouteID:"O-2",Direction:1,LineID:"O",Stations:["O54","O53","O52","O51","O50","O12","O11","O10","O09","O08","O07","O06","O05","O04","O03","O02","O01"],TravelTime:{RunTime:[110,87,82,104,148,75,72,89,75,114,118,192,187,100,88,103,0],StopTime:[0,30,30,30,30,35,45,35,35,35,35,35,40,25,25,25,0]}}],Transfer:[{FromLineID:"O",FromStationID:"O11",ToLineID:"R",ToStationID:"R13",IsOnSiteTransfer:1,TransferTime:3},{FromLineID:"O",FromStationID:"O06",ToLineID:"R",ToStationID:"R07",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"O",FromStationID:"O08",ToLineID:"G",ToStationID:"G15",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"O",FromStationID:"O05",ToLineID:"G",ToStationID:"G09",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"O",FromStationID:"O12",ToLineID:"O",ToStationID:"O12",IsOnSiteTransfer:1,TransferTime:1},{FromLineID:"O",FromStationID:"O07",ToLineID:"BL",ToStationID:"BL14",IsOnSiteTransfer:1,TransferTime:2}],Frequency:[{LineID:"O",RouteID:"O-1",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:9,MaxHeadwayMins:10,Time:["06:00","23:00"],AveMins:10},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"O",RouteID:"O-1",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"O",RouteID:"O-2",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:9,MaxHeadwayMins:10,Time:["06:00","23:00"],AveMins:10},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]},{LineID:"O",RouteID:"O-2",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:12,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:12}]}],main:["O-1","O-2"]},{LineID:"BL",LineName:{Zh_tw:"\u677F\u5357\u7DDA",En:"Bannan Line"},LineColor:"#0a59ae",IsBranch:!1,Route:[{RouteID:"BL-1",Direction:0,LineID:"BL",Stations:["BL01","BL02","BL03","BL04","BL05","BL06","BL07","BL08","BL09","BL10","BL11","BL12","BL13","BL14","BL15","BL16","BL17","BL18","BL19","BL20","BL21","BL22","BL23"],TravelTime:{RunTime:[180,95,106,142,92,89,102,74,190,103,132,64,76,84,63,67,72,82,73,99,105,114,0],StopTime:[0,25,25,25,25,25,25,30,28,28,30,40,30,28,40,28,28,28,25,25,25,25,0]}},{RouteID:"BL-1",Direction:1,LineID:"BL",Stations:["BL23","BL22","BL21","BL20","BL19","BL18","BL17","BL16","BL15","BL14","BL13","BL12","BL11","BL10","BL09","BL08","BL07","BL06","BL05","BL04","BL03","BL02","BL01"],TravelTime:{RunTime:[114,105,99,73,82,72,67,63,84,76,64,132,103,190,74,102,89,92,142,106,95,180,0],StopTime:[0,25,25,25,25,28,28,28,40,28,30,40,30,28,28,30,25,25,25,25,25,25,0]}},{RouteID:"BL-2",Direction:0,LineID:"BL",Stations:["BL05","BL06","BL07","BL08","BL09","BL10","BL11","BL12","BL13","BL14","BL15","BL16","BL17","BL18","BL19","BL20","BL21","BL22","BL23"],TravelTime:{RunTime:[92,89,102,74,190,103,132,64,76,84,63,67,72,82,73,99,105,114,0],StopTime:[0,25,25,30,28,28,30,40,30,28,40,28,28,28,25,25,25,25,0]}},{RouteID:"BL-2",Direction:1,LineID:"BL",Stations:["BL23","BL22","BL21","BL20","BL19","BL18","BL17","BL16","BL15","BL14","BL13","BL12","BL11","BL10","BL09","BL08","BL07","BL06","BL05"],TravelTime:{RunTime:[114,105,99,73,82,72,67,63,84,76,64,132,103,190,74,102,89,92,0],StopTime:[0,25,25,25,25,28,28,28,40,28,30,40,30,28,28,30,25,25,0]}}],Transfer:[{FromLineID:"BL",FromStationID:"BL12",ToLineID:"R",ToStationID:"R10",IsOnSiteTransfer:1,TransferTime:4},{FromLineID:"BL",FromStationID:"BL11",ToLineID:"G",ToStationID:"G12",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"BL",FromStationID:"BL14",ToLineID:"O",ToStationID:"O07",IsOnSiteTransfer:1,TransferTime:2},{FromLineID:"BL",FromStationID:"BL23",ToLineID:"BR",ToStationID:"BR24",IsOnSiteTransfer:1,TransferTime:5},{FromLineID:"BL",FromStationID:"BL15",ToLineID:"BR",ToStationID:"BR10",IsOnSiteTransfer:1,TransferTime:5}],Frequency:[{LineID:"BL",RouteID:"BL-1",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:10}]},{LineID:"BL",RouteID:"BL-1",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:8,Time:["06:00","09:00"],AveMins:8},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:9,Time:["09:00","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:10}]},{LineID:"BL",RouteID:"BL-2",ServiceDays:{ServiceTag:"\u5047\u65E5",NationalHolidays:!0,week:[!0,!1,!1,!1,!1,!1,!0]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:8,Time:["06:00","09:00"],AveMins:8},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:9,Time:["09:00","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:10}]},{LineID:"BL",RouteID:"BL-2",ServiceDays:{ServiceTag:"\u5E73\u65E5",NationalHolidays:!1,week:[!1,!0,!0,!0,!0,!0,!1]},OperationTime:["06:00","24:00"],Headways:[{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["06:00","07:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["07:00","09:00"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["09:00","17:00"],AveMins:9},{PeakFlag:"1",MinHeadwayMins:6,MaxHeadwayMins:6,Time:["17:00","19:30"],AveMins:6},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:10,Time:["19:30","23:00"],AveMins:9},{PeakFlag:"0",MinHeadwayMins:8,MaxHeadwayMins:12,Time:["23:00","00:00"],AveMins:10}]}],main:["BL-1","BL-2"]}],station:[{StationID:"BR01",lat:24.998205,lon:24.998205,name:"\u52D5\u7269\u5712",ename:"Taipei Zoo",FirstLast:[{To:"BR24",Time:["06:00","00:00"]}]},{StationID:"BR02",lat:24.99824,lon:24.99824,name:"\u6728\u67F5",ename:"Muzha",FirstLast:[{To:"BR24",Time:["06:01","00:01"]},{To:"BR01",Time:["06:04","00:53"]}]},{StationID:"BR03",lat:24.99857,lon:24.99857,name:"\u842C\u82B3\u793E\u5340",ename:"Wanfang Community",FirstLast:[{To:"BR24",Time:["06:02","00:03"]},{To:"BR01",Time:["06:03","00:52"]}]},{StationID:"BR04",lat:24.99932,lon:24.99932,name:"\u842C\u82B3\u91AB\u9662",ename:"Wanfang Hospital",FirstLast:[{To:"BR24",Time:["06:04","00:05"]},{To:"BR01",Time:["06:01","00:49"]}]},{StationID:"BR05",lat:25.005455,lon:25.005455,name:"\u8F9B\u4EA5",ename:"Xinhai",FirstLast:[{To:"BR24",Time:["06:00","00:07"]},{To:"BR01",Time:["06:00","00:47"]}]},{StationID:"BR06",lat:25.018495,lon:25.018495,name:"\u9E9F\u5149",ename:"Linguang",FirstLast:[{To:"BR24",Time:["06:01","00:10"]},{To:"BR01",Time:["06:03","00:44"]}]},{StationID:"BR07",lat:25.02381,lon:25.02381,name:"\u516D\u5F35\u7281",ename:"Liuzhangli",FirstLast:[{To:"BR24",Time:["06:03","00:12"]},{To:"BR01",Time:["06:01","00:42"]}]},{StationID:"BR08",lat:25.02612,lon:25.02612,name:"\u79D1\u6280\u5927\u6A13",ename:"Technology Building",FirstLast:[{To:"BR24",Time:["06:00","00:15"]},{To:"BR01",Time:["06:00","00:39"]}]},{StationID:"BR09",lat:25.033311,lon:25.033311,name:"\u5927\u5B89",ename:"Daan",FirstLast:[{To:"BR24",Time:["06:01","00:33"]},{To:"BR01",Time:["06:05","00:37"]}]},{StationID:"BR10",lat:25.041749,lon:25.041749,name:"\u5FE0\u5B5D\u5FA9\u8208",ename:"Zhongxiao Fuxing",FirstLast:[{To:"BR24",Time:["06:03","00:35"]},{To:"BR01",Time:["06:03","00:35"]}]},{StationID:"BR11",lat:25.052044,lon:25.052044,name:"\u5357\u4EAC\u5FA9\u8208",ename:"Nanjing Fuxing",FirstLast:[{To:"BR24",Time:["06:05","00:38"]},{To:"BR01",Time:["06:01","00:33"]}]},{StationID:"BR12",lat:25.06085,lon:25.06085,name:"\u4E2D\u5C71\u570B\u4E2D",ename:"Zhongshan Junior High School",FirstLast:[{To:"BR24",Time:["06:00","00:40"]},{To:"BR01",Time:["06:00","00:29"]}]},{StationID:"BR13",lat:25.062908,lon:25.062908,name:"\u677E\u5C71\u6A5F\u5834",ename:"Songshan Airport",FirstLast:[{To:"BR24",Time:["06:02","00:43"]},{To:"BR01",Time:["06:02","00:25"]}]},{StationID:"BR14",lat:25.07943,lon:25.07943,name:"\u5927\u76F4",ename:"Dazhi",FirstLast:[{To:"BR24",Time:["06:00","00:46"]},{To:"BR01",Time:["06:00","00:22"]}]},{StationID:"BR15",lat:25.08483,lon:25.08483,name:"\u528D\u5357\u8DEF",ename:"Jiannan Rd.",FirstLast:[{To:"BR24",Time:["06:01","00:49"]},{To:"BR01",Time:["06:03","00:19"]}]},{StationID:"BR16",lat:25.08216,lon:25.08216,name:"\u897F\u6E56",ename:"Xihu",FirstLast:[{To:"BR24",Time:["06:03","00:52"]},{To:"BR01",Time:["06:01","00:16"]}]},{StationID:"BR17",lat:25.08007,lon:25.08007,name:"\u6E2F\u5898",ename:"Gangqian",FirstLast:[{To:"BR24",Time:["06:00","00:54"]},{To:"BR01",Time:["06:00","00:14"]}]},{StationID:"BR18",lat:25.078455,lon:25.078455,name:"\u6587\u5FB7",ename:"Wende",FirstLast:[{To:"BR24",Time:["06:01","00:56"]},{To:"BR01",Time:["06:05","00:12"]}]},{StationID:"BR19",lat:25.083675,lon:25.083675,name:"\u5167\u6E56",ename:"Neihu",FirstLast:[{To:"BR24",Time:["06:02","00:58"]},{To:"BR01",Time:["06:03","00:10"]}]},{StationID:"BR20",lat:25.083805,lon:25.083805,name:"\u5927\u6E56\u516C\u5712",ename:"Dahu Park",FirstLast:[{To:"BR24",Time:["06:04","01:00"]},{To:"BR01",Time:["06:01","00:08"]}]},{StationID:"BR21",lat:25.07271,lon:25.07271,name:"\u846B\u6D32",ename:"Huzhou",FirstLast:[{To:"BR24",Time:["06:00","01:03"]},{To:"BR01",Time:["06:00","00:05"]}]},{StationID:"BR22",lat:25.067455,lon:25.067455,name:"\u6771\u6E56",ename:"Donghu",FirstLast:[{To:"BR24",Time:["06:01","01:05"]},{To:"BR01",Time:["06:03","00:03"]}]},{StationID:"BR23",lat:25.05992,lon:25.05992,name:"\u5357\u6E2F\u8EDF\u9AD4\u5712\u5340",ename:"Nangang Software Park",FirstLast:[{To:"BR24",Time:["06:03","01:07"]},{To:"BR01",Time:["06:01","00:01"]}]},{StationID:"BR24",lat:25.054919,lon:25.054919,name:"\u5357\u6E2F\u5C55\u89BD\u9928",ename:"Taipei Nangang Exhibition Center",FirstLast:[{To:"BR01",Time:["06:00","00:00"]}]},{StationID:"R02",lat:25.032395,lon:25.032395,name:"\u8C61\u5C71",ename:"Xiangshan",FirstLast:[{To:"R28",Time:["06:00","00:00"]}]},{StationID:"R03",lat:25.032865,lon:25.032865,name:"\u53F0\u5317101/\u4E16\u8CBF",ename:"Taipei 101/World Trade Center",FirstLast:[{To:"R28",Time:["06:02","00:02"]},{To:"R02",Time:["06:04","00:56"]}]},{StationID:"R04",lat:25.033015,lon:25.033015,name:"\u4FE1\u7FA9\u5B89\u548C",ename:"Xinyi Anhe",FirstLast:[{To:"R28",Time:["06:04","00:04"]},{To:"R02",Time:["06:02","00:54"]}]},{StationID:"R05",lat:25.033311,lon:25.033311,name:"\u5927\u5B89",ename:"Daan",FirstLast:[{To:"R28",Time:["06:00","00:25"]},{To:"R02",Time:["06:00","00:52"]}]},{StationID:"R06",lat:25.033225,lon:25.033225,name:"\u5927\u5B89\u68EE\u6797\u516C\u5712",ename:"Daan Park",FirstLast:[{To:"R28",Time:["06:01","00:26"]},{To:"R02",Time:["06:08","00:50"]}]},{StationID:"R07",lat:25.033894,lon:25.033894,name:"\u6771\u9580",ename:"Dongmen",FirstLast:[{To:"R28",Time:["06:03","00:28"]},{To:"R02",Time:["06:06","00:49"]}]},{StationID:"R08",lat:25.032767,lon:25.032767,name:"\u4E2D\u6B63\u7D00\u5FF5\u5802",ename:"Chiang Kai-Shek Memorial Hall",FirstLast:[{To:"R28",Time:["06:06","00:31"]},{To:"R02",Time:["06:03","00:45"]}]},{StationID:"R09",lat:25.041399,lon:25.041399,name:"\u53F0\u5927\u91AB\u9662",ename:"NTU Hospital",FirstLast:[{To:"R28",Time:["06:08","00:33"]},{To:"R02",Time:["06:01","00:43"]}]},{StationID:"R10",lat:25.04631,lon:25.04631,name:"\u53F0\u5317\u8ECA\u7AD9",ename:"Taipei Main Station",FirstLast:[{To:"R28",Time:["06:00","00:35"]},{To:"R02",Time:["06:00","00:41"]}]},{StationID:"R11",lat:25.052621,lon:25.052621,name:"\u4E2D\u5C71",ename:"Zhongshan",FirstLast:[{To:"R28",Time:["06:02","00:37"]},{To:"R02",Time:["06:03","00:40"]}]},{StationID:"R12",lat:25.057575,lon:25.057575,name:"\u96D9\u9023",ename:"Shuanglian",FirstLast:[{To:"R28",Time:["06:03","00:38"]},{To:"R02",Time:["06:01","00:38"]}]},{StationID:"R13",lat:25.06235,lon:25.06235,name:"\u6C11\u6B0A\u897F\u8DEF",ename:"Minzuan W. Rd.",FirstLast:[{To:"R28",Time:["06:05","00:39"]},{To:"R02",Time:["06:00","00:37"]}]},{StationID:"R14",lat:25.071409,lon:25.071409,name:"\u5713\u5C71",ename:"Yuanshan",FirstLast:[{To:"R28",Time:["06:07","00:42"]},{To:"R02",Time:["06:02","00:34"]}]},{StationID:"R15",lat:25.084201,lon:25.084201,name:"\u528D\u6F6D",ename:"Jiantan",FirstLast:[{To:"R28",Time:["06:00","00:45"]},{To:"R02",Time:["06:00","00:31"]}]},{StationID:"R16",lat:25.093492,lon:25.093492,name:"\u58EB\u6797",ename:"Shilin",FirstLast:[{To:"R28",Time:["06:02","00:47"]},{To:"R02",Time:["06:05","00:28"]}]},{StationID:"R17",lat:25.102718,lon:25.102718,name:"\u829D\u5C71",ename:"Zhishan",FirstLast:[{To:"R28",Time:["06:04","00:50"]},{To:"R02",Time:["06:03","00:26"]}]},{StationID:"R18",lat:25.109815,lon:25.109815,name:"\u660E\u5FB7",ename:"Mingde",FirstLast:[{To:"R28",Time:["06:05","00:52"]},{To:"R02",Time:["06:01","00:24"]}]},{StationID:"R19",lat:25.114455,lon:25.114455,name:"\u77F3\u724C",ename:"Shipai",FirstLast:[{To:"R28",Time:["06:07","00:53"]},{To:"R02",Time:["06:00","00:23"]}]},{StationID:"R20",lat:25.120852,lon:25.120852,name:"\u552D\u54E9\u5CB8",ename:"Qilian",FirstLast:[{To:"R28",Time:["06:00","00:56"]},{To:"R02",Time:["06:00","00:19"]}]},{StationID:"R21",lat:25.12547,lon:25.12547,name:"\u5947\u5CA9",ename:"Qiyan",FirstLast:[{To:"R28",Time:["06:02","00:58"]},{To:"R02",Time:["06:02","00:18"]}]},{StationID:"R22",lat:25.131819,lon:25.131819,name:"\u5317\u6295",ename:"Beitou",FirstLast:[{To:"R28",Time:["06:03","01:00"]},{To:"R02",Time:["06:00","00:16"]},{To:"R22A",Time:["06:00","00:10"]}]},{StationID:"R22A",lat:25.136931,lon:25.136931,name:"\u65B0\u5317\u6295",ename:"Xinbeitou",FirstLast:[{To:"R22",Time:["06:05","00:02"]}]},{StationID:"R23",lat:25.137497,lon:25.137497,name:"\u5FA9\u8208\u5D17",ename:"Fuxinggang",FirstLast:[{To:"R28",Time:["06:06","01:03"]},{To:"R02",Time:["06:02","00:12"]}]},{StationID:"R24",lat:25.130923,lon:25.130923,name:"\u5FE0\u7FA9",ename:"Zhongyi",FirstLast:[{To:"R28",Time:["06:02","01:05"]},{To:"R02",Time:["06:00","00:10"]}]},{StationID:"R25",lat:25.12551,lon:25.12551,name:"\u95DC\u6E21",ename:"Guandu",FirstLast:[{To:"R28",Time:["06:04","01:07"]},{To:"R02",Time:["06:08","00:08"]}]},{StationID:"R26",lat:25.1369,lon:25.1369,name:"\u7AF9\u570D",ename:"Zhuwei",FirstLast:[{To:"R28",Time:["06:07","01:10"]},{To:"R02",Time:["06:05","00:06"]}]},{StationID:"R27",lat:25.15399,lon:25.15399,name:"\u7D05\u6A39\u6797",ename:"Hongshulin",FirstLast:[{To:"R28",Time:["06:00","01:13"]},{To:"R02",Time:["06:03","00:03"]}]},{StationID:"R28",lat:25.167745,lon:25.167745,name:"\u6DE1\u6C34",ename:"Tamsui",FirstLast:[{To:"R02",Time:["06:00","00:00"]}]},{StationID:"G01",lat:24.95761,lon:24.95761,name:"\u65B0\u5E97",ename:"Xindian",FirstLast:[{To:"G19",Time:["06:00","00:00"]}]},{StationID:"G02",lat:24.96744,lon:24.96744,name:"\u65B0\u5E97\u5340\u516C\u6240",ename:"Xindian District Office",FirstLast:[{To:"G19",Time:["06:02","00:02"]},{To:"G01",Time:["06:02","01:05"]}]},{StationID:"G03",lat:24.97545,lon:24.97545,name:"\u4E03\u5F35",ename:"Qizhang",FirstLast:[{To:"G19",Time:["06:03","00:03"]},{To:"G01",Time:["06:00","01:03"]},{To:"G03",Time:["06:03","23:57"]}]},{StationID:"G03A",lat:24.97188,lon:24.97188,name:"\u5C0F\u78A7\u6F6D",ename:"Xiaobitan",FirstLast:[{To:"G03A",Time:["06:11","00:09"]}]},{StationID:"G04",lat:24.98272,lon:24.98272,name:"\u5927\u576A\u6797",ename:"Dapinglin",FirstLast:[{To:"G19",Time:["06:00","00:05"]},{To:"G01",Time:["06:08","01:02"]}]},{StationID:"G05",lat:24.992824,lon:24.992824,name:"\u666F\u7F8E",ename:"Jingmei",FirstLast:[{To:"G19",Time:["06:02","00:07"]},{To:"G01",Time:["06:06","01:00"]}]},{StationID:"G06",lat:25.001978,lon:25.001978,name:"\u842C\u9686",ename:"Wanlong",FirstLast:[{To:"G19",Time:["06:04","00:08"]},{To:"G01",Time:["06:04","00:58"]}]},{StationID:"G07",lat:25.014781,lon:25.014781,name:"\u516C\u9928",ename:"Gongguan",FirstLast:[{To:"G19",Time:["06:00","00:11"]},{To:"G01",Time:["06:02","00:55"]}]},{StationID:"G08",lat:25.020733,lon:25.020733,name:"\u53F0\u96FB\u5927\u6A13",ename:"Taipower Building",FirstLast:[{To:"G19",Time:["06:02","00:12"]},{To:"G01",Time:["06:00","00:54"]}]},{StationID:"G09",lat:25.026373,lon:25.026373,name:"\u53E4\u4EAD",ename:"Guting",FirstLast:[{To:"G19",Time:["06:04","00:14"]},{To:"G01",Time:["06:05","00:52"]}]},{StationID:"G10",lat:25.032767,lon:25.032767,name:"\u4E2D\u6B63\u7D00\u5FF5\u5802",ename:"Chiang Kai-Shek Memorial Hall",FirstLast:[{To:"G19",Time:["06:00","00:16"]},{To:"G01",Time:["06:03","00:50"]}]},{StationID:"G11",lat:25.035585,lon:25.035585,name:"\u5C0F\u5357\u9580",ename:"Xiaonanmen",FirstLast:[{To:"G19",Time:["06:02","00:18"]},{To:"G01",Time:["06:02","00:48"]}]},{StationID:"G12",lat:25.042025,lon:25.042025,name:"\u897F\u9580",ename:"Ximen",FirstLast:[{To:"G19",Time:["06:04","00:27"]},{To:"G01",Time:["06:00","00:46"]}]},{StationID:"G13",lat:25.049554,lon:25.049554,name:"\u5317\u9580",ename:"Beimen",FirstLast:[{To:"G19",Time:["06:00","00:41"]},{To:"G01",Time:["06:02","00:44"]}]},{StationID:"G14",lat:25.052621,lon:25.052621,name:"\u4E2D\u5C71",ename:"Zhongshan",FirstLast:[{To:"G19",Time:["06:02","00:43"]},{To:"G01",Time:["06:00","00:42"]}]},{StationID:"G15",lat:25.052693,lon:25.052693,name:"\u677E\u6C5F\u5357\u4EAC",ename:"Songliang Nanjing",FirstLast:[{To:"G19",Time:["06:05","00:45"]},{To:"G01",Time:["06:02","00:40"]}]},{StationID:"G16",lat:25.052044,lon:25.052044,name:"\u5357\u4EAC\u5FA9\u8208",ename:"Nanjing Fuxing",FirstLast:[{To:"G19",Time:["06:00","00:47"]},{To:"G01",Time:["06:00","00:38"]}]},{StationID:"G17",lat:25.05152,lon:25.05152,name:"\u53F0\u5317\u5C0F\u5DE8\u86CB",ename:"Taipei Arena",FirstLast:[{To:"G19",Time:["06:02","00:49"]},{To:"G01",Time:["06:05","00:05"]}]},{StationID:"G18",lat:25.051588,lon:25.051588,name:"\u5357\u4EAC\u4E09\u6C11",ename:"Nanjing Sanmin",FirstLast:[{To:"G19",Time:["06:05","00:51"]},{To:"G01",Time:["06:03","00:03"]}]},{StationID:"G19",lat:25.050118,lon:25.050118,name:"\u677E\u5C71",ename:"Songshan",FirstLast:[{To:"G01",Time:["06:00","00:00"]}]},{StationID:"O01",lat:24.990065,lon:24.990065,name:"\u5357\u52E2\u89D2",ename:"Nanshijiao",FirstLast:[{To:"O21",Time:["06:00","00:00"]},{To:"O54",Time:["06:04","00:03"]}]},{StationID:"O02",lat:24.99392,lon:24.99392,name:"\u666F\u5B89",ename:"Jingan",FirstLast:[{To:"O21",Time:["06:01","00:02"]},{To:"O01",Time:["06:01","01:01"]},{To:"O54",Time:["06:05","00:05"]}]},{StationID:"O03",lat:25.002895,lon:25.002895,name:"\u6C38\u5B89\u5E02\u5834",ename:"Yongan Market",FirstLast:[{To:"O21",Time:["06:03","00:04"]},{To:"O01",Time:["06:00","01:00"]},{To:"O54",Time:["06:00","00:07"]}]},{StationID:"O04",lat:25.013858,lon:25.013858,name:"\u9802\u6EAA",ename:"Dingxi",FirstLast:[{To:"O21",Time:["06:05","00:06"]},{To:"O01",Time:["06:03","00:58"]},{To:"O54",Time:["06:02","00:09"]}]},{StationID:"O05",lat:25.026373,lon:25.026373,name:"\u53E4\u4EAD",ename:"Guting",FirstLast:[{To:"O21",Time:["06:00","00:17"]},{To:"O01",Time:["06:00","00:54"]},{To:"O54",Time:["06:06","00:27"]}]},{StationID:"O06",lat:25.033894,lon:25.033894,name:"\u6771\u9580",ename:"Dongmen",FirstLast:[{To:"O21",Time:["06:03","00:33"]},{To:"O01",Time:["06:03","00:50"]},{To:"O54",Time:["06:08","00:30"]}]},{StationID:"O07",lat:25.042498,lon:25.042498,name:"\u5FE0\u5B5D\u65B0\u751F",ename:"Zhongxiao Xinsheng",FirstLast:[{To:"O21",Time:["06:06","00:36"]},{To:"O01",Time:["06:00","00:48"]},{To:"O54",Time:["06:00","00:33"]}]},{StationID:"O08",lat:25.052693,lon:25.052693,name:"\u677E\u6C5F\u5357\u4EAC",ename:"Songliang Nanjing",FirstLast:[{To:"O21",Time:["06:08","00:38"]},{To:"O01",Time:["06:03","00:46"]},{To:"O54",Time:["06:02","00:35"]}]},{StationID:"O09",lat:25.05924,lon:25.05924,name:"\u884C\u5929\u5BAE",ename:"Xingtian Temple",FirstLast:[{To:"O21",Time:["06:00","00:40"]},{To:"O01",Time:["06:01","00:44"]},{To:"O54",Time:["06:04","00:37"]}]},{StationID:"O10",lat:25.062665,lon:25.062665,name:"\u4E2D\u5C71\u570B\u5C0F",ename:"Zhongshan Elementary School",FirstLast:[{To:"O21",Time:["06:02","00:41"]},{To:"O01",Time:["06:00","00:42"]},{To:"O54",Time:["06:06","00:39"]}]},{StationID:"O11",lat:25.06235,lon:25.06235,name:"\u6C11\u6B0A\u897F\u8DEF",ename:"Minzuan W. Rd.",FirstLast:[{To:"O21",Time:["06:04","00:43"]},{To:"O01",Time:["06:01","00:40"]},{To:"O54",Time:["06:00","00:41"]}]},{StationID:"O12",lat:25.06322,lon:25.06322,name:"\u5927\u6A4B\u982D",ename:"Daqiaotou",FirstLast:[{To:"O21",Time:["06:06","00:45"]},{To:"O01",Time:["06:00","00:29"]},{To:"O54",Time:["06:02","00:42"]}]},{StationID:"O13",lat:25.063075,lon:25.063075,name:"\u53F0\u5317\u6A4B",ename:"Taipei Bridge",FirstLast:[{To:"O21",Time:["06:08","00:47"]},{To:"O01",Time:["06:06","00:27"]}]},{StationID:"O14",lat:25.059451,lon:25.059451,name:"\u83DC\u5BEE",ename:"Cailiao",FirstLast:[{To:"O21",Time:["06:00","00:49"]},{To:"O01",Time:["06:04","00:25"]}]},{StationID:"O15",lat:25.05571,lon:25.05571,name:"\u4E09\u91CD",ename:"Sanchong",FirstLast:[{To:"O21",Time:["06:02","00:51"]},{To:"O01",Time:["06:02","00:23"]}]},{StationID:"O16",lat:25.04632,lon:25.04632,name:"\u5148\u55C7\u5BAE",ename:"Xianse Temple",FirstLast:[{To:"O21",Time:["06:04","00:53"]},{To:"O01",Time:["06:00","00:12"]}]},{StationID:"O17",lat:25.039735,lon:25.039735,name:"\u982D\u524D\u5E84",ename:"Touqianzhuang",FirstLast:[{To:"O21",Time:["06:07","00:56"]},{To:"O01",Time:["06:04","00:10"]}]},{StationID:"O18",lat:25.03608,lon:25.03608,name:"\u65B0\u838A",ename:"Xinzhuang",FirstLast:[{To:"O21",Time:["06:00","00:58"]},{To:"O01",Time:["06:03","00:08"]}]},{StationID:"O19",lat:25.03279,lon:25.03279,name:"\u8F14\u5927",ename:"Fu Jen University",FirstLast:[{To:"O21",Time:["06:03","01:01"]},{To:"O01",Time:["06:00","00:05"]}]},{StationID:"O20",lat:25.029073,lon:25.029073,name:"\u4E39\u9CF3",ename:"Danfeng",FirstLast:[{To:"O21",Time:["06:00","01:03"]},{To:"O01",Time:["06:03","00:03"]}]},{StationID:"O21",lat:25.022107,lon:25.022107,name:"\u8FF4\u9F8D",ename:"Huilong",FirstLast:[{To:"O01",Time:["06:00","00:00"]}]},{StationID:"O50",lat:25.070275,lon:25.070275,name:"\u4E09\u91CD\u570B\u5C0F",ename:"Sanchong Elementary School",FirstLast:[{To:"O54",Time:["06:05","00:45"]},{To:"O01",Time:["06:02","00:09"]}]},{StationID:"O51",lat:25.07646,lon:25.07646,name:"\u4E09\u548C\u570B\u4E2D",ename:"Sanhe Junior High School",FirstLast:[{To:"O54",Time:["06:07","00:47"]},{To:"O01",Time:["06:00","00:07"]}]},{StationID:"O52",lat:25.080485,lon:25.080485,name:"\u5F90\u532F\u4E2D\u5B78",ename:"St.lgnatius High School",FirstLast:[{To:"O54",Time:["06:00","00:49"]},{To:"O01",Time:["06:04","00:05"]}]},{StationID:"O53",lat:25.085425,lon:25.085425,name:"\u4E09\u6C11\u9AD8\u4E2D",ename:"Sanmin Senior High School",FirstLast:[{To:"O54",Time:["06:02","00:51"]},{To:"O01",Time:["06:02","00:03"]}]},{StationID:"O54",lat:25.09152,lon:25.09152,name:"\u8606\u6D32",ename:"Luzhou",FirstLast:[{To:"O01",Time:["06:00","00:00"]}]},{StationID:"BL01",lat:24.96012,lon:24.96012,name:"\u9802\u57D4",ename:"Dingpu",FirstLast:[{To:"BL23",Time:["06:00","00:00"]}]},{StationID:"BL02",lat:24.96682,lon:24.96682,name:"\u6C38\u5BE7",ename:"Yongning",FirstLast:[{To:"BL23",Time:["06:03","00:03"]},{To:"BL01",Time:["06:00","01:08"]}]},{StationID:"BL03",lat:24.97313,lon:24.97313,name:"\u571F\u57CE",ename:"Tucheng",FirstLast:[{To:"BL23",Time:["06:05","00:05"]},{To:"BL01",Time:["06:05","01:06"]}]},{StationID:"BL04",lat:24.985305,lon:24.985305,name:"\u6D77\u5C71",ename:"Haishan",FirstLast:[{To:"BL23",Time:["06:07","00:07"]},{To:"BL01",Time:["06:03","01:04"]}]},{StationID:"BL05",lat:24.99828,lon:24.99828,name:"\u4E9E\u6771\u91AB\u9662",ename:"Far Eastern Hospital",FirstLast:[{To:"BL23",Time:["06:00","00:10"]},{To:"BL01",Time:["06:00","01:01"]}]},{StationID:"BL06",lat:25.008465,lon:25.008465,name:"\u5E9C\u4E2D",ename:"Fuzhong",FirstLast:[{To:"BL23",Time:["06:02","00:12"]},{To:"BL01",Time:["06:05","00:59"]}]},{StationID:"BL07",lat:25.013825,lon:25.013825,name:"\u677F\u6A4B",ename:"Banqiao",FirstLast:[{To:"BL23",Time:["06:03","00:13"]},{To:"BL01",Time:["06:04","00:57"]}]},{StationID:"BL08",lat:25.02327,lon:25.02327,name:"\u65B0\u57D4",ename:"Xinpu",FirstLast:[{To:"BL23",Time:["06:00","00:16"]},{To:"BL01",Time:["06:02","00:55"]}]},{StationID:"BL09",lat:25.030265,lon:25.030265,name:"\u6C5F\u5B50\u7FE0",ename:"Jiangzicui",FirstLast:[{To:"BL23",Time:["06:02","00:17"]},{To:"BL01",Time:["06:00","00:54"]}]},{StationID:"BL10",lat:25.03528,lon:25.03528,name:"\u9F8D\u5C71\u5BFA",ename:"Longshan Temple",FirstLast:[{To:"BL23",Time:["06:05","00:21"]},{To:"BL01",Time:["06:05","00:50"]}]},{StationID:"BL11",lat:25.042025,lon:25.042025,name:"\u897F\u9580",ename:"Ximen",FirstLast:[{To:"BL23",Time:["06:08","00:23"]},{To:"BL01",Time:["06:03","00:48"]}]},{StationID:"BL12",lat:25.04631,lon:25.04631,name:"\u53F0\u5317\u8ECA\u7AD9",ename:"Taipei Main Station",FirstLast:[{To:"BL23",Time:["06:00","00:45"]},{To:"BL01",Time:["06:00","00:45"]}]},{StationID:"BL13",lat:25.04468,lon:25.04468,name:"\u5584\u5C0E\u5BFA",ename:"Shandao Temple",FirstLast:[{To:"BL23",Time:["06:02","00:46"]},{To:"BL01",Time:["06:07","00:44"]}]},{StationID:"BL14",lat:25.042498,lon:25.042498,name:"\u5FE0\u5B5D\u65B0\u751F",ename:"Zhongxiao Xinsheng",FirstLast:[{To:"BL23",Time:["06:04","00:48"]},{To:"BL01",Time:["06:05","00:42"]}]},{StationID:"BL15",lat:25.041749,lon:25.041749,name:"\u5FE0\u5B5D\u5FA9\u8208",ename:"Zhongxiao Fuxing",FirstLast:[{To:"BL23",Time:["06:00","00:50"]},{To:"BL01",Time:["06:03","00:40"]}]},{StationID:"BL16",lat:25.041505,lon:25.041505,name:"\u5FE0\u5B5D\u6566\u5316",ename:"Xhongxiao Dunhua",FirstLast:[{To:"BL23",Time:["06:01","00:52"]},{To:"BL01",Time:["06:02","00:24"]}]},{StationID:"BL17",lat:25.04137,lon:25.04137,name:"\u570B\u7236\u7D00\u5FF5\u9928",ename:"Sun Yat-Sen Memorial Hall",FirstLast:[{To:"BL23",Time:["06:03","00:53"]},{To:"BL01",Time:["06:00","00:22"]}]},{StationID:"BL18",lat:25.041135,lon:25.041135,name:"\u5E02\u653F\u5E9C",ename:"Taipei City Hall",FirstLast:[{To:"BL23",Time:["06:00","00:55"]},{To:"BL01",Time:["06:03","00:21"]}]},{StationID:"BL19",lat:25.040855,lon:25.040855,name:"\u6C38\u6625",ename:"Yongchun",FirstLast:[{To:"BL23",Time:["06:02","00:57"]},{To:"BL01",Time:["06:02","00:19"]}]},{StationID:"BL20",lat:25.044715,lon:25.044715,name:"\u5F8C\u5C71\u57E4",ename:"Houshanpi",FirstLast:[{To:"BL23",Time:["06:04","00:59"]},{To:"BL01",Time:["06:00","00:17"]}]},{StationID:"BL21",lat:25.050459,lon:25.050459,name:"\u6606\u967D",ename:"Kunyang",FirstLast:[{To:"BL23",Time:["06:06","01:01"]},{To:"BL01",Time:["06:04","00:15"]}]},{StationID:"BL22",lat:25.052035,lon:25.052035,name:"\u5357\u6E2F",ename:"Nangang",FirstLast:[{To:"BL23",Time:["06:00","01:03"]},{To:"BL01",Time:["06:02","00:12"]}]},{StationID:"BL23",lat:25.054919,lon:25.054919,name:"\u5357\u6E2F\u5C55\u89BD\u9928",ename:"Taipei Nangang Exhibition Center",FirstLast:[{To:"BL01",Time:["06:00","00:00"]}]}]},krtc:{line:[{LineID:"R",LineName:{Zh_tw:"\u7D05\u7DDA",En:"Red Line"},LineColor:"#d30547",IsBranch:!1,Route:[{RouteID:"R",Direction:0,LineID:"R",Stations:["R3","R4","R4A","R5","R6","R7","R8","R9","R10","R11","R12","R13","R14","R15","R16","R17","R18","R19","R20","R21","R22","R22A","R23","R24"],TravelTime:{RunTime:[120,180,180,180,180,120,180,120,180,180,120,120,180,180,180,120,180,120,120,180,120,120,240,0],StopTime:[20,25,25,20,20,30,30,40,40,25,25,35,20,30,20,20,20,20,20,20,20,25,300,0]}},{RouteID:"R",Direction:1,LineID:"R",Stations:["R24","R23","R22A","R22","R21","R20","R19","R18","R17","R16","R15","R14","R13","R12","R11","R10","R9","R8","R7","R6","R5","R4A","R4","R3"],TravelTime:{RunTime:[240,120,120,180,120,120,180,120,180,180,180,120,120,180,180,120,180,120,180,180,180,180,120,0],StopTime:[0,300,25,20,20,20,20,20,20,20,30,20,35,25,25,40,40,30,30,20,20,25,25,20]}}],Transfer:[{FromLineID:"R",FromStationID:"R10",ToLineID:"O",ToStationID:"O5",TransferTime:3}],Frequency:[]},{LineID:"O",LineName:{Zh_tw:"\u6A58\u7DDA",En:"Orange Line"},LineColor:"#f77f00",IsBranch:!1,Route:[{RouteID:"O",Direction:0,LineID:"O",Stations:["O1","O2","O4","O5","O6","O7","O8","O9","O10","O11","O12","O13","O14","OT1"],TravelTime:{RunTime:[120,120,120,120,120,120,120,120,120,120,240,120,240,0],StopTime:[20,20,40,20,25,20,20,25,25,20,20,20,300,0]}},{RouteID:"O",Direction:1,LineID:"O",Stations:["OT1","O14","O13","O12","O11","O10","O9","O8","O7","O6","O5","O4","O2","O1"],TravelTime:{RunTime:[240,120,240,120,120,120,120,120,120,120,120,120,120,0],StopTime:[0,300,20,20,20,25,25,20,20,25,20,40,20,20]}}],Transfer:[{FromLineID:"O",FromStationID:"O5",ToLineID:"R",ToStationID:"R10",TransferTime:3}],Frequency:[]}],station:[{StationID:"R3",lat:22.564822,lon:22.564822,name:"\u5C0F\u6E2F",ename:"Siaogang",FirstLast:[{To:"R24",Time:["05:55","00:00"]},{To:"R3",Time:["",""]}]},{StationID:"R4",lat:22.570199,lon:22.570199,name:"\u9AD8\u96C4\u570B\u969B\u6A5F\u5834",ename:"Kaohsiung International Airport",FirstLast:[{To:"R24",Time:["05:56","00:02"]},{To:"R3",Time:["06:26","00:44"]}]},{StationID:"R4A",lat:22.580363,lon:22.580363,name:"\u8349\u8859",ename:"Caoya",FirstLast:[{To:"R24",Time:["05:58","00:05"]},{To:"R3",Time:["06:24","00:42"]}]},{StationID:"R5",lat:22.588356,lon:22.588356,name:"\u524D\u93AE\u9AD8\u4E2D",ename:"Cianjhen Senior High School",FirstLast:[{To:"R24",Time:["06:00","00:08"]},{To:"R3",Time:["06:22","00:40"]}]},{StationID:"R6",lat:22.596856,lon:22.596856,name:"\u51F1\u65CB",ename:"Kaisyuan",FirstLast:[{To:"R24",Time:["06:02","00:10"]},{To:"R3",Time:["06:20","00:38"]}]},{StationID:"R7",lat:22.60587,lon:22.60587,name:"\u7345\u7532",ename:"Shihjia",FirstLast:[{To:"R24",Time:["06:04","00:13"]},{To:"R3",Time:["06:18","00:35"]}]},{StationID:"R8",lat:22.614011,lon:22.614011,name:"\u4E09\u591A\u5546\u5708",ename:"Sanduo Shopping District",FirstLast:[{To:"R24",Time:["05:55","00:16"]},{To:"R3",Time:["06:16","00:33"]}]},{StationID:"R9",lat:22.624628,lon:22.624628,name:"\u4E2D\u592E\u516C\u5712",ename:"Central Park",FirstLast:[{To:"R24",Time:["05:56","00:18"]},{To:"R3",Time:["06:14","00:31"]}]},{StationID:"R10",lat:22.631387,lon:22.631387,name:"\u7F8E\u9E97\u5CF6",ename:"Formosa Boulevard",FirstLast:[{To:"R24",Time:["05:58","00:21"]},{To:"R3",Time:["06:12","00:29"]}]},{StationID:"R11",lat:22.639769,lon:22.639769,name:"\u9AD8\u96C4\u8ECA\u7AD9",ename:"Kaohsiung Main Station",FirstLast:[{To:"R24",Time:["06:00","00:23"]},{To:"R3",Time:["06:10","00:28"]}]},{StationID:"R12",lat:22.648314,lon:22.648314,name:"\u5F8C\u9A5B",ename:"Houyi",FirstLast:[{To:"R24",Time:["06:02","00:25"]},{To:"R3",Time:["06:08","00:25"]}]},{StationID:"R13",lat:22.657126,lon:22.657126,name:"\u51F9\u5B50\u5E95",ename:"Aozihdi",FirstLast:[{To:"R24",Time:["06:04","00:27"]},{To:"R3",Time:["06:06","00:24"]}]},{StationID:"R14",lat:22.666135,lon:22.666135,name:"\u5DE8\u86CB",ename:"Kaohsiung Arena",FirstLast:[{To:"R24",Time:["06:06","00:29"]},{To:"R3",Time:["06:04","00:22"]}]},{StationID:"R15",lat:22.676738,lon:22.676738,name:"\u751F\u614B\u5712\u5340",ename:"Ecological District",FirstLast:[{To:"R24",Time:["06:08","00:31"]},{To:"R3",Time:["06:02","00:20"]}]},{StationID:"R16",lat:22.688073,lon:22.688073,name:"\u5DE6\u71DF",ename:"Zuoying",FirstLast:[{To:"R24",Time:["06:10","00:33"]},{To:"R3",Time:["06:00","00:17"]}]},{StationID:"R17",lat:22.701622,lon:22.701622,name:"\u4E16\u904B",ename:"World Game",FirstLast:[{To:"R24",Time:["06:12","00:35"]},{To:"R3",Time:["05:58","00:15"]}]},{StationID:"R18",lat:22.708479,lon:22.708479,name:"\u6CB9\u5EE0\u570B\u5C0F",ename:"Oil Refinery Elementary School",FirstLast:[{To:"R24",Time:["06:14","00:37"]},{To:"R3",Time:["05:56","00:14"]}]},{StationID:"R19",lat:22.718671,lon:22.718671,name:"\u6960\u6893\u52A0\u5DE5\u5340",ename:"Nanzih Export Processing Zone",FirstLast:[{To:"R24",Time:["06:16","00:39"]},{To:"R3",Time:["05:55","00:11"]}]},{StationID:"R20",lat:22.7223,lon:22.7223,name:"\u5F8C\u52C1",ename:"Houjing",FirstLast:[{To:"R24",Time:["06:18","00:41"]},{To:"R3",Time:["06:10","00:10"]}]},{StationID:"R21",lat:22.729403,lon:22.729403,name:"\u90FD\u6703\u516C\u5712",ename:"Metropolitan Park",FirstLast:[{To:"R24",Time:["06:20","00:42"]},{To:"R3",Time:["06:08","00:08"]}]},{StationID:"R22",lat:22.744399,lon:22.744399,name:"\u9752\u57D4",ename:"Cingpu",FirstLast:[{To:"R24",Time:["06:22","00:45"]},{To:"R3",Time:["06:06","00:06"]}]},{StationID:"R22A",lat:22.753398,lon:22.753398,name:"\u6A4B\u982D\u7CD6\u5EE0",ename:"Ciaotou Sugar Refinery",FirstLast:[{To:"R24",Time:["06:24","00:46"]},{To:"R3",Time:["06:04","00:04"]}]},{StationID:"R23",lat:22.760452,lon:22.760452,name:"\u6A4B\u982D\u706B\u8ECA\u7AD9",ename:"Ciaotou Station",FirstLast:[{To:"R24",Time:["06:25","00:48"]},{To:"R3",Time:["06:02","00:02"]}]},{StationID:"R24",lat:22.780544,lon:22.780544,name:"\u5357\u5CA1\u5C71",ename:"Gangshan South",FirstLast:[{To:"R24",Time:["",""]},{To:"R3",Time:["06:00","00:00"]}]},{StationID:"O1",lat:22.621544,lon:22.621544,name:"\u897F\u5B50\u7063",ename:"Sizihwan",FirstLast:[{To:"OT1",Time:["06:00","00:00"]},{To:"O1",Time:["",""]}]},{StationID:"O2",lat:22.623538,lon:22.623538,name:"\u9E7D\u57D5\u57D4",ename:"Yanchengpu",FirstLast:[{To:"OT1",Time:["06:01","00:01"]},{To:"O1",Time:["06:03","00:21"]}]},{StationID:"O4",lat:22.629002,lon:22.629002,name:"\u5E02\u8B70\u6703",ename:"City Council",FirstLast:[{To:"OT1",Time:["06:03","00:03"]},{To:"O1",Time:["06:01","00:19"]}]},{StationID:"O5",lat:22.631387,lon:22.631387,name:"\u7F8E\u9E97\u5CF6",ename:"Formosa Boulevard",FirstLast:[{To:"OT1",Time:["06:05","00:05"]},{To:"O1",Time:["06:00","00:16"]}]},{StationID:"O6",lat:22.630745,lon:22.630745,name:"\u4FE1\u7FA9\u570B\u5C0F",ename:"Sinyi Elementary School",FirstLast:[{To:"OT1",Time:["06:07","00:07"]},{To:"O1",Time:["06:05","00:15"]}]},{StationID:"O7",lat:22.630292,lon:22.630292,name:"\u6587\u5316\u4E2D\u5FC3",ename:"Cultural Center",FirstLast:[{To:"OT1",Time:["06:08","00:08"]},{To:"O1",Time:["06:04","00:13"]}]},{StationID:"O8",lat:22.629331,lon:22.629331,name:"\u4E94\u584A\u539D",ename:"Wukuaicuo",FirstLast:[{To:"OT1",Time:["06:00","00:10"]},{To:"O1",Time:["06:02","00:12"]}]},{StationID:"O9",lat:22.627291,lon:22.627291,name:"\u6280\u64CA\u9928",ename:"Martial Arts Stadium",FirstLast:[{To:"OT1",Time:["06:01","00:12"]},{To:"O1",Time:["06:01","00:10"]}]},{StationID:"O10",lat:22.625162,lon:22.625162,name:"\u885B\u6B66\u71DF",ename:"Weiwuying",FirstLast:[{To:"OT1",Time:["06:02","00:13"]},{To:"O1",Time:["06:00","00:09"]}]},{StationID:"O11",lat:22.625331,lon:22.625331,name:"\u9CF3\u5C71\u897F\u7AD9",ename:"Fongshan West",FirstLast:[{To:"OT1",Time:["06:04","00:15"]},{To:"O1",Time:["06:06","00:07"]}]},{StationID:"O12",lat:22.625994,lon:22.625994,name:"\u9CF3\u5C71",ename:"Fongshan",FirstLast:[{To:"OT1",Time:["06:05","00:16"]},{To:"O1",Time:["06:05","00:06"]}]},{StationID:"O13",lat:22.625197,lon:22.625197,name:"\u5927\u6771",ename:"Dadong",FirstLast:[{To:"OT1",Time:["06:07","00:18"]},{To:"O1",Time:["06:03","00:04"]}]},{StationID:"O14",lat:22.624915,lon:22.624915,name:"\u9CF3\u5C71\u570B\u4E2D",ename:"Fongshan Junior High School",FirstLast:[{To:"OT1",Time:["06:09","00:20"]},{To:"O1",Time:["06:02","00:02"]}]},{StationID:"OT1",lat:22.622423,lon:22.622423,name:"\u5927\u5BEE",ename:"Daliao",FirstLast:[{To:"OT1",Time:["",""]},{To:"O1",Time:["06:00","00:00"]}]}]},tymetro:{line:[{LineID:"A",LineName:{Zh_tw:"\u6843\u5712\u6A5F\u5834\u6377\u904B\u7DDA",En:"Airport MRT Line"},LineColor:"#8246af",IsBranch:!1,Route:[{RouteID:"A",Direction:0,LineID:"A",Stations:["A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","A11","A12","A13","A14a","A15","A16","A17","A18","A19","A20","A21"]},{RouteID:"A",Direction:1,LineID:"A",Stations:["A21","A20","A19","A18","A17","A16","A15","A14a","A13","A12","A11","A10","A9","A8","A7","A6","A5","A4","A3","A2","A1"]}],Transfer:[],TravelTime:[null,null,null,null],Frequency:[{LineID:"A",RouteID:"A",TrainType:1,LineNo:"A",ServiceDays:{ServiceTag:"\u6BCF\u65E5",NationalHolidays:!0,week:[!0,!0,!0,!0,!0,!0,!0]},OperationTime:["05:57","00:25"],Headways:[{PeakFlag:"1",MinHeadwayMins:15,MaxHeadwayMins:15,Time:["05:57","00:25"],AveMins:15}]}],TravelTimeBetween:{TrainType1:{A1:{A2:300,A3:539,A4:669,A5:757,A6:908,A7:1189,A8:1363,A9:1511,A10:2033,A11:2154,A12:2346,A13:2451,A14a:2505,A15:2651,A16:2813,A17:2931,A18:3133,A19:3263,A20:3523,A21:3732},A2:{A3:239,A4:369,A5:457,A6:608,A7:889,A8:1063,A9:1211,A10:1733,A11:1854,A12:2046,A13:2151,A14a:2205,A15:2351,A16:2513,A17:2631,A18:2833,A19:2963,A20:3223,A21:3432,A1:305},A3:{A4:130,A5:218,A6:369,A7:650,A8:824,A9:972,A10:1494,A11:1615,A12:1807,A13:1912,A14a:1966,A15:2112,A16:2274,A17:2392,A18:2594,A19:2724,A20:2984,A21:3193,A1:541,A2:236},A4:{A5:88,A6:239,A7:520,A8:694,A9:842,A10:1364,A11:1485,A12:1677,A13:1782,A14a:1836,A15:1982,A16:2144,A17:2262,A18:2464,A19:2594,A20:2854,A21:3063,A1:669,A2:364,A3:128},A5:{A6:151,A7:432,A8:606,A9:754,A10:1276,A11:1397,A12:1589,A13:1694,A14a:1748,A15:1894,A16:2056,A17:2174,A18:2376,A19:2506,A20:2766,A21:2975,A1:754,A2:449,A3:213,A4:85},A6:{A7:281,A8:455,A9:603,A10:1125,A11:1246,A12:1438,A13:1543,A14a:1597,A15:1743,A16:1905,A17:2023,A18:2225,A19:2355,A20:2615,A21:2824,A1:910,A2:605,A3:369,A4:241,A5:156},A7:{A8:174,A9:322,A10:844,A11:965,A12:1157,A13:1262,A14a:1316,A15:1462,A16:1624,A17:1742,A18:1944,A19:2074,A20:2334,A21:2543,A1:1225,A2:920,A3:684,A4:556,A5:471,A6:315},A8:{A9:148,A10:670,A11:791,A12:983,A13:1088,A14a:1142,A15:1288,A16:1450,A17:1568,A18:1770,A19:1900,A20:2160,A21:2369,A1:1435,A2:1130,A3:894,A4:766,A5:681,A6:525,A7:210},A9:{A10:522,A11:643,A12:835,A13:940,A14a:994,A15:1140,A16:1302,A17:1420,A18:1622,A19:1752,A20:2012,A21:2221,A1:1587,A2:1282,A3:1046,A4:918,A5:833,A6:677,A7:362,A8:152},A10:{A11:121,A12:313,A13:418,A14a:472,A15:618,A16:780,A17:898,A18:1100,A19:1230,A20:1490,A21:1699,A1:2007,A2:1702,A3:1466,A4:1338,A5:1253,A6:1097,A7:782,A8:572,A9:420},A11:{A12:192,A13:297,A14a:351,A15:497,A16:659,A17:777,A18:979,A19:1109,A20:1369,A21:1578,A1:2126,A2:1821,A3:1585,A4:1457,A5:1372,A6:1216,A7:901,A8:691,A9:539,A10:119},A12:{A13:105,A14a:159,A15:305,A16:467,A17:585,A18:787,A19:917,A20:1177,A21:1386,A1:2311,A2:2006,A3:1770,A4:1642,A5:1557,A6:1401,A7:1086,A8:876,A9:724,A10:304,A11:185},A13:{A14a:54,A15:200,A16:362,A17:480,A18:682,A19:812,A20:1072,A21:1281,A1:2412,A2:2107,A3:1871,A4:1743,A5:1658,A6:1502,A7:1187,A8:977,A9:825,A10:405,A11:286,A12:101},A14a:{A15:146,A16:308,A17:426,A18:628,A19:758,A20:1018,A21:1227,A1:2472,A2:2167,A3:1931,A4:1803,A5:1718,A6:1562,A7:1247,A8:1037,A9:885,A10:465,A11:346,A12:161,A13:60},A15:{A16:162,A17:280,A18:482,A19:612,A20:872,A21:1081,A1:2624,A2:2319,A3:2083,A4:1955,A5:1870,A6:1714,A7:1399,A8:1189,A9:1037,A10:617,A11:498,A12:313,A13:212,A14a:152},A16:{A17:118,A18:320,A19:450,A20:710,A21:919,A1:2787,A2:2482,A3:2246,A4:2118,A5:2033,A6:1877,A7:1562,A8:1352,A9:1200,A10:780,A11:661,A12:476,A13:375,A14a:315,A15:163},A17:{A18:202,A19:332,A20:592,A21:801,A1:2992,A2:2687,A3:2451,A4:2323,A5:2238,A6:2082,A7:1767,A8:1557,A9:1405,A10:985,A11:866,A12:681,A13:580,A14a:520,A15:368,A16:205},A18:{A19:130,A20:390,A21:599,A1:3205,A2:2900,A3:2664,A4:2536,A5:2451,A6:2295,A7:1980,A8:1770,A9:1618,A10:1198,A11:1079,A12:894,A13:793,A14a:733,A15:581,A16:418,A17:213},A19:{A20:260,A21:469,A1:3335,A2:3030,A3:2794,A4:2666,A5:2581,A6:2425,A7:2110,A8:1900,A9:1748,A10:1328,A11:1209,A12:1024,A13:923,A14a:863,A15:711,A16:548,A17:343,A18:130},A20:{A21:209,A1:3600,A2:3295,A3:3059,A4:2931,A5:2846,A6:2690,A7:2375,A8:2165,A9:2013,A10:1593,A11:1474,A12:1289,A13:1188,A14a:1128,A15:976,A16:813,A17:608,A18:395,A19:265},A21:{A1:3753,A2:3448,A3:3212,A4:3084,A5:2999,A6:2843,A7:2528,A8:2318,A9:2166,A10:1746,A11:1627,A12:1442,A13:1341,A14a:1281,A15:1129,A16:966,A17:761,A18:548,A19:418,A20:153}},TrainType2:{A1:{A3:95,A8:758,A12:1622,A13:1723},A3:{A8:663,A12:1527,A13:1628,A1:479},A8:{A12:864,A13:965,A1:1246,A3:767},A12:{A13:101,A1:1964,A3:1485,A8:718},A13:{A1:2052,A3:1573,A8:806,A12:88}}}}],station:[{StationID:"A1",lat:25.048,lon:25.048,name:"\u53F0\u5317\u8ECA\u7AD9",ename:"Taipei Main Station",FirstLast:[{To:"A21",Time:["06:07","23:07"],TrainType:1},{To:"A13",Time:["06:00","23:00"],TrainType:2}]},{StationID:"A2",lat:25.054,lon:25.054,name:"\u4E09\u91CD\u7AD9",ename:"Sanchong Station",FirstLast:[{To:"A21",Time:["05:58","23:15"],TrainType:1},{To:"A1",Time:["06:08","00:17"],TrainType:1}]},{StationID:"A3",lat:25.061,lon:25.061,name:"\u65B0\u5317\u7522\u696D\u5712\u5340\u7AD9",ename:"New Taipei Industrial Park Station",FirstLast:[{To:"A21",Time:["06:02","23:19"],TrainType:1},{To:"A1",Time:["06:03","00:12"],TrainType:1},{To:"A13",Time:["06:09","23:09"],TrainType:2},{To:"A1",Time:["06:11","23:26"],TrainType:2}]},{StationID:"A4",lat:25.059,lon:25.059,name:"\u65B0\u838A\u526F\u90FD\u5FC3\u7AD9",ename:"Xinzhuang Fuduxin Station",FirstLast:[{To:"A21",Time:["06:05","23:22"],TrainType:1},{To:"A1",Time:["06:00","00:09"],TrainType:1}]},{StationID:"A5",lat:25.052,lon:25.052,name:"\u6CF0\u5C71\u7AD9",ename:"Taishan Station",FirstLast:[{To:"A21",Time:["06:07","23:24"],TrainType:1},{To:"A1",Time:["05:58","00:07"],TrainType:1}]},{StationID:"A6",lat:25.033,lon:25.033,name:"\u6CF0\u5C71\u8CB4\u548C\u7AD9",ename:"Taishan Guihe Station",FirstLast:[{To:"A21",Time:["06:10","23:27"],TrainType:1},{To:"A1",Time:["06:10","00:04"],TrainType:1}]},{StationID:"A7",lat:25.041,lon:25.041,name:"\u9AD4\u80B2\u5927\u5B78\u7AD9",ename:"National Taiwan Sport University Station",FirstLast:[{To:"A21",Time:["06:00","23:32"],TrainType:1},{To:"A1",Time:["06:03","23:57"],TrainType:1}]},{StationID:"A8",lat:25.061,lon:25.061,name:"\u9577\u5E9A\u91AB\u9662\u7AD9",ename:"Chang Gung Memorial Hospital Station",FirstLast:[{To:"A21",Time:["06:08","23:36"],TrainType:1},{To:"A1",Time:["05:59","23:53"],TrainType:1},{To:"A13",Time:["06:06","23:21"],TrainType:2},{To:"A1",Time:["05:58","23:11"],TrainType:2}]},{StationID:"A9",lat:25.066,lon:25.066,name:"\u6797\u53E3\u7AD9",ename:"Linkou Station",FirstLast:[{To:"A21",Time:["06:11","23:39"],TrainType:1},{To:"A1",Time:["06:07","23:50"],TrainType:1}]},{StationID:"A10",lat:25.081,lon:25.081,name:"\u5C71\u9F3B\u7AD9",ename:"Shanbi Station",FirstLast:[{To:"A21",Time:["06:05","23:48"],TrainType:1},{To:"A1",Time:["05:59","23:42"],TrainType:1}]},{StationID:"A11",lat:25.086,lon:25.086,name:"\u5751\u53E3\u7AD9",ename:"Kengkou Station",FirstLast:[{To:"A21",Time:["06:08","23:51"],TrainType:1},{To:"A1",Time:["06:11","23:40"],TrainType:1}]},{StationID:"A12",lat:25.082,lon:25.082,name:"\u6A5F\u5834\u7B2C\u4E00\u822A\u5EC8\u7AD9",ename:"Airport Terminal 1 Station",FirstLast:[{To:"A21",Time:["05:57","23:55"],TrainType:1},{To:"A1",Time:["06:07","23:36"],TrainType:1},{To:"A13",Time:["06:07","23:37"],TrainType:2},{To:"A1",Time:["05:59","22:58"],TrainType:2}]},{StationID:"A13",lat:25.077,lon:25.077,name:"\u6A5F\u5834\u7B2C\u4E8C\u822A\u5EC8\u7AD9",ename:"Airport Terminal 2 Station",FirstLast:[{To:"A21",Time:["06:00","23:57"],TrainType:1},{To:"A1",Time:["06:04","23:33"],TrainType:1},{To:"A1",Time:["05:57","22:55"],TrainType:2}]},{StationID:"A14a",lat:25.069,lon:25.069,name:"\u6A5F\u5834\u65C5\u9928\u7AD9",ename:"Airport Hotel Station",FirstLast:[{To:"A21",Time:["06:03","00:00"],TrainType:1},{To:"A1",Time:["06:00","23:29"],TrainType:1}]},{StationID:"A15",lat:25.056,lon:25.056,name:"\u5927\u5712\u7AD9",ename:"Dayuan Station",FirstLast:[{To:"A21",Time:["06:06","00:03"],TrainType:1},{To:"A1",Time:["06:12","23:26"],TrainType:1}]},{StationID:"A16",lat:25.037,lon:25.037,name:"\u6A6B\u5C71\u7AD9",ename:"Hengshan Station",FirstLast:[{To:"A21",Time:["06:09","00:06"],TrainType:1},{To:"A1",Time:["06:09","23:23"],TrainType:1}]},{StationID:"A17",lat:25.024,lon:25.024,name:"\u9818\u822A\u7AD9",ename:"Linghang Station",FirstLast:[{To:"A21",Time:["06:12","00:09"],TrainType:1},{To:"A1",Time:["06:06","23:20"],TrainType:1}]},{StationID:"A18",lat:25.014,lon:25.014,name:"\u9AD8\u9435\u6843\u5712\u7AD9",ename:"Taoyuan HSR Station",FirstLast:[{To:"A21",Time:["06:02","00:13"],TrainType:1},{To:"A1",Time:["06:02","23:16"],TrainType:1}]},{StationID:"A19",lat:25.002,lon:25.002,name:"\u6843\u5712\u9AD4\u80B2\u5712\u5340\u7AD9",ename:"Taoyuan Sports Park Station",FirstLast:[{To:"A21",Time:["06:05","00:16"],TrainType:1},{To:"A1",Time:["06:13","23:13"],TrainType:1}]},{StationID:"A20",lat:24.98,lon:24.98,name:"\u8208\u5357\u7AD9",ename:"Xingnan Station",FirstLast:[{To:"A21",Time:["06:10","00:21"],TrainType:1},{To:"A1",Time:["06:08","23:08"],TrainType:1}]},{StationID:"A21",lat:24.967,lon:24.967,name:"\u74B0\u5317\u7AD9",ename:"Huanbei Station",FirstLast:[{To:"A1",Time:["06:05","23:05"],TrainType:1}]}]}},bus:{setDefaultCfg:function(e){return e=e||{},e.manageBy=e.manageBy||"City",e.cbFn=e.cbFn||function(e){console.info(e)},e.selectField=e.selectField?u.selectFieldFn(e.selectField):"",e.top=3e3,e},getCityData:function(e){for(var t=g.bus.city,a=!1,n=0;n<t.length;n++)if(t[n].name==e||t[n].City==e||t[n].CityCode==e){a=t[n];break}return a},getBusArriveTime:function(e,t,i){var a=u.filterFn(u.filterParam("StopUID","==",e,"or"));this.getEstimatedTimeOfArrival(a,t,i)},getBusRouteArriveTime:function(e,t){var i=e.substr(0,3),a=u.filterFn(u.filterParam("RouteUID","==",e,"or"));this.getEstimatedTimeOfArrival(a,i,t)},getBusRouteInfo:function(e,t){t=this.setDefaultCfg(t);var i=e.substr(0,3),a=F+"/Route/"+t.manageBy+"/"+this.getCityData(i).City+"?";a+=u.filterFn(u.filterParam("RouteUID","==",e)+"&"+u.topFn()),t.selectField&&(a+="&"+t.selectField),u.getURL(a,t.cbFn)},getBusRealtimeNearStop:function(t,i,a){a=this.setDefaultCfg(a);var n=t.substr(0,3);if(/string|number/.test(e(i))){i=i.toString();var o=F+"/RealTimeNearStop/"+a.manageBy+"/"+this.getCityData(n).City+"?";o+=u.filterFn(u.filterParam(["RouteUID","Direction"],"==",[t,i],"and"))+"&"+u.topFn()}else{var o=F+"/RealTimeNearStop/"+a.manageBy+"/"+this.getCityData(n).City+"?";o+=u.filterFn(u.filterParam(["RouteUID"],"==",[t],"and"))+"&"+u.topFn()}a.selectField&&(o+="&"+a.selectField),u.getURL(o,a.cbFn)},getBusRoute:function(e,t,i){t=this.setDefaultCfg(t),i||("string"==typeof e?i=e.substr(0,3):i=e[0].substr(0,3));var a=F+"/Route/"+t.manageBy+"/"+this.getCityData(i).City+"?";a+=u.filterFn(u.filterParam("RouteUID","==",e),"or")+"&"+u.topFn(),t.selectField&&(a+="&"+t.selectField),u.getURL(a,t.cbFn)},getBusStation:function(e,t,i){i=this.setDefaultCfg(i);var a=F+"/Station/"+i.manageBy+"/"+this.getCityData(t).City+"?";a+=u.filterFn(u.filterParam("StationID","==",e.toString()))+"&"+u.topFn(),i.selectField&&(a+="&"+i.selectField),u.getURL(a,i.cbFn)},getBusStopRoute:function(e,t,i){i=this.setDefaultCfg(i);var a=F+"/StopOfRoute/"+i.manageBy+"/"+this.getCityData(t).City+"?";a+=u.filterFn(u.filterParam("RouteUID","==",e.toString()))+"&",a+=u.orderByFn("SubRouteName/Zh_tw","asc")+"&"+u.topFn(),i.selectField&&(a+="&"+i.selectField),u.getURL(a,i.cbFn)},getBusStopRouteByNumber:function(e,t,i){i=this.setDefaultCfg(i);var a=F+"/StopOfRoute/"+i.manageBy+"/"+this.getCityData(t).City+"/"+encodeURI(e)+"?";a+=u.orderByFn("SubRouteName/Zh_tw","asc")+"&"+u.topFn(),i.selectField&&(a+="&"+i.selectField),u.getURL(a,i.cbFn)},getEstimatedTimeOfArrival:function(e,t,i){e=e?e+"&":"",i=this.setDefaultCfg(i);var a=F+"/EstimatedTimeOfArrival/"+i.manageBy+"/"+this.getCityData(t).City+"?";a+=e+u.topFn(),i.selectField&&(a+="&"+i.selectField),u.getURL(a,i.cbFn)},searchBusByNumber:function(e,t,i){i=this.setDefaultCfg(i);var a=F+"/Route/"+i.manageBy+"/"+this.getCityData(t).City+"/"+encodeURI(e)+"?";a+=u.orderByFn("RouteName/Zh_tw","asc")+"&"+u.topFn(),i.selectField&&(a+="&"+i.selectField),u.getURL(a,i.cbFn)}},metro:h,trtc:b,krtc:P,tymetro:E,klrt:q,tra:J,jsSHA:y,common:d};for(var ee in V)u[ee]=V[ee];return Q&&(!window.rocptx&&(window.rocptx=u),!window.$trainTaiwanLib&&(window.$trainTaiwanLib={}),!window.$trainTaiwanLib.ptx&&(window.$trainTaiwanLib.ptx=u),!window.Promise&&console.log("PTX library need Promise, please include a Promise polyfill.")),u});
